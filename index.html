<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-lang-key="appTitle">æ†ç«‹æ‰¹ç™¼è¨‚å–®ç³»çµ± | Nice One Wholesale Ordering</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Use Inter font -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f7f7;
            /* é è¨­éš±è—ä¸»å…§å®¹ï¼Œç›´åˆ°ç™»å…¥æˆåŠŸ */
            visibility: hidden;
        }
        body.authenticated {
            visibility: visible;
        }
        /* Custom scrollbar styling for the cart and categories */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-thumb { background: #3b82f6; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #2563eb; }
        .sticky-nav {
            top: 0;
            z-index: 50;
        }
    </style>
    <!-- QR Code Library for generating QR codes client-side -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>
<body class="text-gray-800">

    <!-- Gemini API Key (Required for LLM features) -->
    <script>const apiKey = "";</script>

    <!-- Language & Data Layer Mockup -->
    <script>
        // --- CUSTOMER DATA STORAGE (LOCAL MODE) ---
        
        // å®¢æˆ¶åå–®å·²ç§»é™¤ï¼Œæ”¹ç‚ºæ‰‹å‹•è¼¸å…¥
        window.customerList = []; // ä¿æŒç‚ºç©ºï¼Œä¸å†ä½¿ç”¨è‡ªå‹•è¯æƒ³
        window.isLoggedIn = false; // é è¨­ç‚ºæœªç™»å…¥ï¼Œéœ€é€šéå¯†ç¢¼é©—è­‰

        // è¼‰å…¥å®¢æˆ¶è³‡æ–™ï¼ˆå¾ localStorageï¼‰
        function loadCustomerData() {
            try {
                const savedData = localStorage.getItem('currentCustomer');
                window.customerData = savedData ? JSON.parse(savedData) : {
                    name: "è«‹é»æ“Šè¨­å®šæŒ‰éˆ•å¡«å¯«",
                    customerID: "GUEST001",
                    address: "N/A",
                    phone: "N/A"
                };
            } catch (e) {
                 window.customerData = {
                    name: "è«‹é»æ“Šè¨­å®šæŒ‰éˆ•å¡«å¯«",
                    customerID: "GUEST001",
                    address: "N/A",
                    phone: "N/A"
                };
            }
            updateCustomerDisplay();
        }

        // å„²å­˜å®¢æˆ¶è³‡æ–™åˆ° localStorage
        function saveCustomerData(event) {
            event.preventDefault();

            const newCustomerData = {
                name: document.getElementById('customer-name').value.trim() || "Unnamed Customer",
                customerID: document.getElementById('customer-id').value.trim() || "CUST-UNASSIGNED",
                address: document.getElementById('customer-address').value.trim() || "No Address Provided",
                phone: document.getElementById('customer-phone').value.trim() || "No Phone Provided"
            };
            
            if (newCustomerData.customerID === "CUST-UNASSIGNED" || !newCustomerData.name || newCustomerData.address === "No Address Provided") {
                 window.showModal(window.T('customerInfoFillWarning'), 'error');
                 return;
            }

            // Save to localStorage
            localStorage.setItem('currentCustomer', JSON.stringify(newCustomerData));
            window.customerData = newCustomerData;
            
            updateCustomerDisplay();
            window.showModal(window.T('customerSaveSuccess'), 'success');
            toggleCustomerModal(); // é—œé–‰æ¨¡æ…‹æ¡†
        }

        function setupCustomerForm() {
            // é å¡«ç•¶å‰è³‡æ–™
            document.getElementById('customer-name').value = window.customerData.name !== "è«‹é»æ“Šè¨­å®šæŒ‰éˆ•å¡«å¯«" ? window.customerData.name : '';
            document.getElementById('customer-id').value = window.customerData.customerID !== "GUEST001" ? window.customerData.customerID : '';
            document.getElementById('customer-address').value = window.customerData.address !== "N/A" ? window.customerData.address : '';
            document.getElementById('customer-phone').value = window.customerData.phone !== "N/A" ? window.customerData.phone : '';
            
            const form = document.getElementById('customer-form');
            if (form) {
                form.onsubmit = saveCustomerData;
            }
            updateCustomerDisplay();
        }
        
        function updateCustomerDisplay() {
            const display = document.getElementById('customer-info-display');
            if (display) {
                display.innerHTML = `
                    <p class="font-bold text-gray-900">${window.T('customerName')}: ${window.customerData.name}</p>
                    <p class="text-xs text-gray-500">${window.T('customerID')}: ${window.customerData.customerID}</p>
                `;
            }
            window.renderCart && window.renderCart(); 
        }

        // Function to toggle the customer modal
        function toggleCustomerModal() {
            // åœ¨æ¯æ¬¡å˜—è©¦æ‰“é–‹/é—œé–‰æ¨¡æ…‹æ¡†æ™‚ï¼Œå¦‚æœæœªç™»å…¥ï¼Œå¼·åˆ¶è¦æ±‚ç™»å…¥
            if (!window.isLoggedIn) {
                 document.getElementById('password-modal').classList.remove('hidden');
                 return;
            }
            document.getElementById('customer-modal').classList.toggle('hidden');
        }
        
        // --- STATIC PASSWORD / ACCESS CONTROL LOGIC ---
        const STATIC_PASSWORD = "5Xi2G5e_v#VX!YH"; 

        function verifyPassword(event) {
            event.preventDefault();
            const inputPassword = document.getElementById('password-input').value.trim();
            
            if (inputPassword === STATIC_PASSWORD) {
                window.isLoggedIn = true;
                document.body.classList.add('authenticated');
                document.getElementById('password-modal').classList.add('hidden');
                loadCustomerData(); // è¼‰å…¥æœ¬åœ°å„²å­˜çš„å®¢æˆ¶è³‡æ–™
                window.showModal("ç™»å…¥æˆåŠŸï¼", 'success');
            } else {
                window.showModal("å¯†ç¢¼éŒ¯èª¤ï¼Œè«‹é‡è©¦ã€‚", 'error');
                document.getElementById('password-input').value = '';
            }
        }

        // --- CORE APPLICATION LOGIC REMAINS BELOW ---
        
        const APP_ID = "1:896047165968:web:33b2ab2ef72accbd849095"; // Hardcoded App ID for consistency
        let MOCK_INVENTORY_SYSTEM = new Map(); // Simulates stock levels in QB

        const CATEGORIES = {
            HOT_ITEMS: { cn: 'ç†±é–€è²¨å“', en: 'Hot Items', icon: 'ğŸ”¥' },
            PERSONAL_CARE: { cn: 'å€‹äººè­·ç†', en: 'Personal Care', icon: 'ğŸ§¼' },
            CANNED_MEAT: { cn: 'ç½é ­è‚‰é¡', en: 'Canned Food (Meat/Fish/Pork Cubes)', icon: 'ğŸ–' },
            INSTANT_MIXES: { cn: 'å³æº¶é£²å“', en: 'Instant Mixes (Coffee/Tea/Milo)', icon: 'â˜•' },
            SNACKS_BISCUITS: { cn: 'é›¶é£Ÿé¤…ä¹¾/æœ±å¤åŠ›', en: 'Snacks, Biscuits & Chocolate', icon: 'ğŸª' },
            DAILY_NECESSITIES: { cn: 'æ—¥ç”¨å“ (æ¸…æ½”/æŸ”é †)', en: 'Daily Necessities', icon: 'ğŸ§´' },
            DRINKS_DAIRY: { cn: 'é£²å“åŠå¥¶é¡ (æ·¡å¥¶/éº¥ç‰‡)', en: 'Drinks, Dairy & Oatmeal', icon: 'ğŸ¥›' },
            SEASONING_MISC: { cn: 'èª¿å‘³åŠé›œé …', en: 'Seasoning & Misc.', icon: 'ğŸ§‚' },
        };
        
        // Helper functions used for data processing
        function cleanPrice(priceStr) {
            if (!priceStr || typeof priceStr !== 'string') return 0;
            const cleaned = priceStr.replace(/[HK$,\s]/g, '').trim();
            if (cleaned.includes('æŸ¥è©¢') || cleaned.includes('enquiry')) {
                return 9999.00; // Placeholder for "per enquiry" items, must be number for sorting/sum
            }
            return parseFloat(cleaned) || 0;
        }

        function generateId(cnName, details) {
            // Create a simple, short ID by hashing the first few characters
            let id = cnName.substring(0, 5) + details.substring(0, 5);
            // Remove non-alphanumeric characters for a clean ID key
            return id.replace(/[^a-zA-Z0-9]/g, '');
        }

        const rawProductsData = [
            // --- 1 é¦™çš‚ Soap.csv --- (PERSONAL_CARE)
            { cn: 'åŠ›å£«é¦™çš‚(æ··åˆ)', en: 'Lux Soap (Mixed)', category: 'PERSONAL_CARE', details: '80g x6s x24æ‰', price: '264', origin: 'å°å°¼' },
            { cn: 'åŠ›å£«é¦™çš‚(ç±³è‰²)', en: 'Lux Soap (Beige)', category: 'PERSONAL_CARE', details: '80g x6s x24æ‰', price: '270', origin: 'å°å°¼' },
            { cn: 'åŠ›å£«é¦™çš‚(ç´«è‰²)', en: 'Lux Soap (Purple)', category: 'PERSONAL_CARE', details: '80g x6s x24æ‰', price: '270', origin: 'å°å°¼' },
            { cn: 'åŠ›å£«é¦™çš‚(è—è‰²)', en: 'Lux Soap (Blue)', category: 'PERSONAL_CARE', details: '80g x6s x24æ‰', price: '270', origin: 'å°å°¼' },
            { cn: 'åŠ›å£«é¦™çš‚(ç²‰ç´…)', en: 'Lux Soap (Pink)', category: 'PERSONAL_CARE', details: '80g x6s x24æ‰', price: '270', origin: 'å°å°¼' },
            { cn: 'å¼·ç”Ÿé¦™çš‚', en: 'Johnsons Baby Soap', category: 'PERSONAL_CARE', details: '120g x4s x6æ‰', price: '162', origin: 'å°å°¼' },
            { cn: 'èŠ±ç‹é¦™çš‚', en: 'Kao White Soap', category: 'PERSONAL_CARE', details: '135g x3s x24æ‰', price: '288', origin: 'æ—¥æœ¬' },
            { cn: 'æ»´éœ²è–„è·é¦™çš‚ (105gx4)', en: 'Dettol Cool Soap. (105gx4)', category: 'PERSONAL_CARE', details: '105g x4å¡Š x36æ‰', price: '414', origin: 'å°å°¼' },
            { cn: 'æ»´éœ²è–„è·é¦™çš‚ (100gx6)', en: 'Dettol Cool Soap. (100gx6)', category: 'PERSONAL_CARE', details: '100g x6s X24æ‰', price: '414', origin: 'å°å°¼' },
            { cn: 'æ»´éœ²è–„è·é¦™çš‚ (æ·ºè—è‰²)', en: 'Dettol Cool Soap. (Light Blue)', category: 'PERSONAL_CARE', details: '100g x6s x24æ‰', price: '414', origin: 'å°å°¼' },
            { cn: 'æ»´éœ²èˆ’è†šé¦™çš‚ (ç²‰ç´…è‰²)', en: 'Dettol Soap (Pink)', category: 'PERSONAL_CARE', details: '100g x6s x24æ‰', price: '414', origin: 'å°å°¼' },
            { cn: 'æ»´éœ²æ¸…æ–°é¦™çš‚ (é»ƒè‰²)', en: 'Dettol Soap (Yellow)', category: 'PERSONAL_CARE', details: '105g x6s x24æ‰', price: '414', origin: 'å°å°¼' },
            { cn: 'æ»´éœ²è˜†è–ˆç‰›æ²¹æœé¦™çš‚ (æ·ºç¶ è‰²)', en: 'Dettol Soap (Aloe Avocado)', category: 'PERSONAL_CARE', details: '100g x6s x24æ‰', price: '414', origin: 'å°å°¼' },
            { cn: 'æ»´éœ²è–°è¡£è‰é¦™çš‚ (ç´«è‰²)', en: 'Dettol Soap (Lavender)', category: 'PERSONAL_CARE', details: '100g x6s x24æ‰', price: '414', origin: 'å°å°¼' },
            { cn: 'æ»´éœ²é¦™æ©™å‘³é¦™çš‚ (æ©™è‰²)', en: 'Dettol Soap (Orange)', category: 'PERSONAL_CARE', details: '100g x6s x24æ‰', price: '414', origin: 'å°å°¼' },
            { cn: 'æ»´éœ²èœœç“œå‘³é¦™çš‚ (ç‰ç¶ è‰²)', en: 'Dettol Soap (Melon)', category: 'PERSONAL_CARE', details: '100g x6s x24æ‰', price: '414', origin: 'å°å°¼' },
            { cn: 'æ»´éœ²åŸå‘³é¦™çš‚ (ç¶ è‰²)', en: 'Dettol Soap (Original)', category: 'PERSONAL_CARE', details: '100g x4s x36æ‰', price: '414', origin: 'å°å°¼' },
            
            // --- 2é¦™çš‚ Soap.csv --- (PERSONAL_CARE)
            { cn: 'å¤šèŠ¬é¦™çš‚ (åŸå‘³)', en: 'Dove Soup (Original)', category: 'PERSONAL_CARE', details: '90g x6s x8æ‰', price: '200.00', origin: 'å°å°¼' },
            { cn: 'å¤šèŠ¬é¦™çš‚ (å…¶ä»–å‘³-1)', en: 'Dove Soup (Assorted-1)', category: 'PERSONAL_CARE', details: '90g x6s x8æ‰', price: '200.00', origin: 'å°å°¼' },
            { cn: 'å¤šèŠ¬é¦™çš‚ (å…¶ä»–å‘³-2)', en: 'Dove Soup (Assorted-2)', category: 'PERSONAL_CARE', details: '90g x6s x8æ‰', price: '200.00', origin: 'å°å°¼' },
            { cn: 'å¤šèŠ¬é¦™çš‚ (å…¶ä»–å‘³-3)', en: 'Dove Soup (Assorted-3)', category: 'PERSONAL_CARE', details: '90g x6s x8æ‰', price: '200.00', origin: 'å°å°¼' },
            { cn: 'æ£•æ¬–ç«ç‘°ç‰›ä¹³é¦™çš‚ (ç²‰ç´…)', en: 'Palmolive Soup (Rose Milk)', category: 'PERSONAL_CARE', details: '80g x3s x24æ‰', price: '216', origin: 'æ³°åœ‹' },
            { cn: 'æ£•æ¬–è˜†è–ˆæ©„æ¬–é¦™çš‚ (ç¶ è‰²)', en: 'Palmolive Soup (Aloe Olive)', category: 'PERSONAL_CARE', details: '80g x3s x24æ‰', price: '216', origin: 'æ³°åœ‹' },
            { cn: 'æ£•æ¬–å«©ç™½çç é¦™çš‚ (ç´«è‰²)', en: 'Palmolive Soup (White Pearl)', category: 'PERSONAL_CARE', details: '80g x3s x24æ‰', price: '216', origin: 'æ³°åœ‹' },
            { cn: 'æ£•æ¬–é¦™çš‚ (ç²‰ç´…-å¤§)', en: 'Palmolive Soap (Pink-Large)', category: 'PERSONAL_CARE', details: '100g x3s x16æ‰', price: '160', origin: 'æ³°åœ‹' },
            { cn: 'æ£•æ¬–é¦™çš‚ (ç¶ è‰²-å¤§)', en: 'Palmolive Soap (Green-Large)', category: 'PERSONAL_CARE', details: '100g x3s x16æ‰', price: '160', origin: 'æ³°åœ‹' },
            { cn: 'æ£•æ¬–é¦™çš‚ (ç´«è‰²-å¤§)', en: 'Palmolive Soap (Purple-Large)', category: 'PERSONAL_CARE', details: '100g x3s x16æ‰', price: '160', origin: 'æ³°åœ‹' },
            { cn: 'åŠ ä¿¡æ°é¦™çš‚', en: 'Cussons Bathing Soap', category: 'PERSONAL_CARE', details: '115g x4s x18', price: '198.00', origin: 'å°å°¼' },
            
            // --- é£Ÿå“.csv --- (SNACKS_BISCUITS)
            { cn: 'æ´½æ´½ é¦™ç“œå­', en: 'ChaCha Sunflower Seeds', category: 'SNACKS_BISCUITS', details: '260g x 20åŒ…', price: '220', origin: 'ä¸­åœ‹' },
            { cn: 'éº¥ç¶­ä»–æ¶ˆåŒ–é¤…', en: 'McVitie\'s Digestive Biscuit(s)', category: 'SNACKS_BISCUITS', details: '400g x 2æ¢ x 9åŒ…', price: '153', origin: 'è¥¿ç­ç‰™' },
            { cn: 'MIXX BEEF ç‰›è‚‰å‘³è˜‡æ‰“é¤…', en: 'MIXX Crackers Beef Flavour', category: 'SNACKS_BISCUITS', details: '280g x 16', price: '176', origin: 'ä¸­åœ‹' },
            { cn: 'å¥§åˆ©å¥§å¤¾å¿ƒé¤…å¹² (æ··åˆå£å‘³)', en: 'Oreo Sandwich Biscuit (Mixed)', category: 'SNACKS_BISCUITS', details: '28.5g x 12åŒ…', price: '124.00', origin: 'å°å°¼' },
            { cn: 'é»ƒæ²¹å‘³è›‹å·', en: 'MIXX Funnyq Waffle Eggrolls (Butter)', category: 'SNACKS_BISCUITS', details: '208g X 16', price: '176', origin: 'ä¸­åœ‹' },
            { cn: 'åˆ©è„†èŠå£«å¤¾å¿ƒé¤…', en: 'Ritz Tray Cheese', category: 'SNACKS_BISCUITS', details: '27g x 9æ¢ x 12åŒ…', price: '138', origin: 'å°å°¼' },
            { cn: 'åŸå‘³è›‹å·', en: 'MIXX Funnyq Waffle Eggrolls (Original)', category: 'SNACKS_BISCUITS', details: '208g x 16', price: '176', origin: 'ä¸­åœ‹' },
            { cn: 'åˆ©è„†çƒ˜çƒ¤è„†ç‰‡-å¿Œå»‰æ´‹è”¥å‘³', en: 'RITZ Toasted Chips Sour Cream And Onion Crackers', category: 'SNACKS_BISCUITS', details: '6 x 229g', price: '120.00', origin: 'è¶Šå—' },
            { cn: 'é»‘æ¾éœ²è˜‡æ‰“é¤…', en: 'Black Truffle Soda Crackers', category: 'SNACKS_BISCUITS', details: '280g x 16', price: '176', origin: 'ä¸­åœ‹' },
            { cn: 'åˆ©æ˜¯çƒ˜çƒ¤è„†ç‰‡-è»Šæ‰“èŠå£«å‘³', en: 'RITZ Toasted Chips Cheese', category: 'SNACKS_BISCUITS', details: '6 x 229g', price: '120.00', origin: 'è¶Šå—' },
            { cn: 'åˆ©æ˜¯-è„†é¤…', en: 'RITZ-Crackers', category: 'SNACKS_BISCUITS', details: '12 x (3 x100g.)', price: '100.00', origin: 'å°å°¼' },
            
            // --- é£²å“ï¼Œ å¥¶é¡ï¼Œ éº¥ç‰‡ï¼Œæ¢³æ‰“ç²‰ï¼Œ ç²Ÿç²‰.csv --- (DRINKS_DAIRY / SEASONING_MISC)
            { cn: 'å¯¶ç¤¦åŠ›(è‹±æ–‡ç‰ˆ)', en: 'Pocari Sweat (English Version)', category: 'DRINKS_DAIRY', details: '500æ¯«å‡ x24æ”¯', price: '95.00', origin: 'å°å°¼' },
            { cn: 'é‡‘ç½ç´…ç‰›', en: 'Redbull(Thailand)', category: 'DRINKS_DAIRY', details: '250æ¯«å‡ x6ç½ x 4æ’', price: '75', origin: 'è¶Šå—' },
            { cn: 'ä¸‰èŠ±æ¤è„‚æ·¡å¥¶', en: 'NestlÃ© Carnation Evaporated Milk', category: 'DRINKS_DAIRY', details: '405g x 48ç½', price: '280', origin: 'æ³°åœ‹' },
            { cn: 'ä¸‰èŠ±ç”œå¥¶(ç…‰å¥¶)', en: 'NestlÃ© Sweetened Milk', category: 'DRINKS_DAIRY', details: '388g x 48ç½', price: '265', origin: 'æ³°åœ‹' },
            { cn: 'é›€å·¢é·¹å˜œç…‰å¥¶', en: 'NestlÃ© Eagle Sweetened Condensed Milk', category: 'DRINKS_DAIRY', details: '350g x48ç½', price: '580', origin: 'ä¸­åœ‹' },
            { cn: 'å…‹å¯§é«˜éˆ£å…¨å®¶äººå¥¶ç²‰', en: 'Klim Whole Family milk powder', category: 'DRINKS_DAIRY', details: '2.2å…¬æ–¤x6ç½', price: '768', origin: 'æ–°è¥¿è˜­' },
            { cn: 'é›€å·¢100%å…¨è„‚å¥¶ç²‰', en: 'NESPRAY INSTANT FULL CREAM MILK POWDER', category: 'DRINKS_DAIRY', details: '2.1å…¬æ–¤x6ç½', price: '858', origin: 'æ–°è¥¿è˜­' },
            { cn: 'æ¡‚æ ¼å¿«ç†Ÿç‡•éº¥ç‰‡ (è—è‰²)', en: 'Quaker Instant Oatmeal (Blue)', category: 'DRINKS_DAIRY', details: '800g x 12åŒ…', price: '192.00', origin: 'é¦¬ä¾†è¥¿äº' },
            { cn: 'æ¡‚æ ¼å³é£Ÿç‡•éº¥ç‰‡ (ç´…è‰²)', en: 'Quaker Instant Oatmeal (Red)', category: 'DRINKS_DAIRY', details: '800g x 12åŒ…', price: '192.00', origin: 'é¦¬ä¾†è¥¿äº' },
            { cn: 'ç¶­ä»–éº¥ç‡Ÿé¤Šéº¥ç‰‡ (å—ç“œ)', en: 'Vitamax Oatmeal drink (Pumpkin)', category: 'DRINKS_DAIRY', details: '300g x 20s x 20è¢‹', price: '440', origin: 'ä¸­åœ‹' },
            { cn: 'ç¶­ä»–éº¥ç‡Ÿé¤Šéº¥ç‰‡ (ç´…ç³™ç±³)', en: 'Vitamax Oatmeal drink (Red Rice)', category: 'DRINKS_DAIRY', details: '300g x 20s x 20è¢‹', price: '420', origin: 'ä¸­åœ‹' },
            { cn: 'ç¶­ä»–éº¥ç‡Ÿé¤Šéº¥ç‰‡ (é»‘ç±³)', en: 'Vitamax Oatmeal drink (Black Rice)', category: 'DRINKS_DAIRY', details: '300g x 20s x 20è¢‹', price: '420', origin: 'ä¸­åœ‹' },
            { cn: 'æ‰‹ ç‰Œå¤šç”¨é€”æ¢³æ‰“ç²‰', en: 'ARM&HAMMER Baking Soda', category: 'SEASONING_MISC', details: '454g x 24ç›’', price: '192', origin: 'ç¾åœ‹' },
            { cn: 'EUROSTAR å¤šç”¨é€”æ¢³æ‰“ç²‰', en: 'Eurostar Baking Soda', category: 'SEASONING_MISC', details: '454g x 24ç›’', price: '144.00', origin: 'ä¸­åœ‹' },
            { cn: 'å®¶æ¨‚ç‰Œå¤§é·¹ ç²‰', en: 'Knorr Kingsford\'s Corn Starch', category: 'SEASONING_MISC', details: '420g x 24ç›’', price: '219.00', origin: 'ä¸­åœ‹' },
            
            // --- æ—¥ç”¨å“ Daily Necessities.csv --- (DAILY_NECESSITIES / PERSONAL_CARE)
            { cn: 'æ±°æ¼¬æ´—è¡£ç²‰ 350å…‹', en: 'Tide Laundry Powder 350g', category: 'DAILY_NECESSITIES', details: '350å…‹ x 36è¢‹', price: '230', origin: 'è¶Šå—' },
            { cn: 'æ±°æ¼¬æ´—è¡£ç²‰ 690å…‹', en: 'Tide Laundry Powder 690å…‹', category: 'DAILY_NECESSITIES', details: '690å…‹ x 18è¢‹', price: '224', origin: 'è¶Šå—' },
            { cn: 'æ±°æ¼¬æ´—è¡£ç²‰ 2.25å…¬æ–¤', en: 'Tide Laundry Powder 2.25kg', category: 'DAILY_NECESSITIES', details: '2.25å…¬æ–¤ x 5è¢‹', price: '210', origin: 'è¶Šå—' },
            { cn: 'æ±°æ¼¬æ´—è¡£ç²‰ 3.6å…¬æ–¤', en: 'Tide Laundry Powder 3.6kg', category: 'DAILY_NECESSITIES', details: '3.6å…¬æ–¤ x 3è¢‹', price: '186', origin: 'è¶Šå—' },
            { cn: 'æ±°æ¼¬æ´—è¡£ç²‰ 8.5å…¬æ–¤', en: 'Tide Laundry Powder 8.5kg', category: 'DAILY_NECESSITIES', details: '8.5å…¬æ–¤ x 2è¢‹', price: '270', origin: 'è¶Šå—' },
            { cn: 'ARIEL æ´—è¡£æ¶² (è£œå……è£)', en: 'Ariel laundry detergent refill', category: 'DAILY_NECESSITIES', details: '2å…¬æ–¤ x 6è¢‹', price: '252', origin: 'è¶Šå—' },
            { cn: 'DOWNY æŸ”é †åŠ‘ (è—)', en: 'Downy Fabric Softener (Blue)', category: 'DAILY_NECESSITIES', details: '1.8å…¬å‡ x 4æ”¯', price: '174', origin: 'è¶Šå—' },
            { cn: 'DOWNY æŸ”é †åŠ‘ (é»‘)', en: 'Downy Fabric Softener (Black)', category: 'DAILY_NECESSITIES', details: '1.8å…¬å‡ x 4æ”¯', price: '174', origin: 'è¶Šå—' },
            { cn: 'DOWNY æŸ”é †åŠ‘ (ç´…)', en: 'Downy Fabric Softener (Red)', category: 'DAILY_NECESSITIES', details: '1.8å…¬å‡ x 4æ”¯', price: '174', origin: 'è¶Šå—' },
            { cn: 'æ£•æ¬–æ´—é«®éœ² (ç¶ è‰²) (å¥åº·é †æ»‘)', en: 'Palmolive Shampoo (Green - Healthy Smooth)', category: 'PERSONAL_CARE', details: '620æ¯«å‡ x 6æ”¯', price: '150', origin: 'ä¸­åœ‹' },
            { cn: 'æ£•æ¬–æ´—é«®éœ² (æ¡ƒç´…è‰²) (æ·±å±¤æ»‹é¤Šä¹¾æ€§)', en: 'Palmolive Shampoo (Pink - Deep Nourish)', category: 'PERSONAL_CARE', details: '620æ¯«å‡ x 6æ”¯', price: '150', origin: 'ä¸­åœ‹' },
            { cn: 'æ£•æ¬–æ´—é«®éœ² (ç´«è‰²) (çµ²æ»‘é †ç›´)', en: 'Palmolive Shampoo (Purple - Silky Straight)', category: 'PERSONAL_CARE', details: '620æ¯«å‡ x 6æ”¯', price: '150', origin: 'ä¸­åœ‹' },
            { cn: 'æ£•æ¬–æ´—é«®éœ² (è—è‰²) (ä¸­æ€§å‡è¡¡)', en: 'Palmolive Shampoo (Blue - Neutral Balance)', category: 'PERSONAL_CARE', details: '620æ¯«å‡ x 6æ”¯', price: '150', origin: 'ä¸­åœ‹' },
            { cn: 'é«˜éœ²æ½”ä¸‰å±¤åŠŸæ•ˆç‰™è†', en: 'Colgate Triple Action Toothpaste', category: 'PERSONAL_CARE', details: '(180å…‹ x 6æ”¯ x 8å¥—) x2', price: '568', origin: 'è¶Šå—' },
            { cn: 'é«˜éœ²æ½”ç‰™åˆ·', en: 'Colgate Toothbrush', category: 'PERSONAL_CARE', details: '12æ”¯ x 24æ‰“', price: '550', origin: 'è¶Šå—' },
            { cn: 'é™½å…‰æ´—æ½”ç²¾ (å¤§)', en: 'Sunlight Dishwashing liquid (Large)', category: 'DAILY_NECESSITIES', details: '1500ml x 9æ”¯', price: '162.00', origin: 'ä¸­åœ‹' },
            { cn: 'é™½å…‰æ´—æ½”ç²¾ (å°)', en: 'Sunlight Dishwashing liquid (Small)', category: 'DAILY_NECESSITIES', details: '750ml X15æè£', price: '150.00', origin: 'ä¸­åœ‹' },
            
            // --- INSTANT COFFEE MILKTEA 1.csv --- (INSTANT_MIXES)
            { cn: 'CAFFINO æ³¡æ²«å’–å•¡ (ç¶“å…¸)', en: 'CAFFINO Cappuccino Org', category: 'INSTANT_MIXES', details: '20 g x 10s x 24è¢‹', price: '192', origin: 'å°å°¼' },
            { cn: 'CAFFINO æ³¡æ²«å’–å•¡ (æ‘©å¡)', en: 'CAFFINO Cappuccino Moca', category: 'INSTANT_MIXES', details: '20 g x 10s x 24è¢‹', price: '192', origin: 'å°å°¼' },
            { cn: 'CAFFINO æ³¡æ²«å’–å•¡ (æ¦›å­)', en: 'CAFFINO Cappuccino Hazel nuts', category: 'INSTANT_MIXES', details: '20 g x 10s x 24è¢‹', price: '192', origin: 'å°å°¼' },
            { cn: 'CAFFINO æ³¡æ²«å’–å•¡äºŒåˆä¸€ (ç„¡ç³–)', en: 'CAFFINO Cappuccino No added sugar (2in1)', category: 'INSTANT_MIXES', details: '13 g x 10s x 24', price: '192', origin: 'å°å°¼' },
            { cn: 'CAFFINOæ‹¿éµå’–å•¡ (ç‰¹æ¿ƒ)', en: 'CAFFINO Cappuccino Bold', category: 'INSTANT_MIXES', details: '27 g x 6s x 24è¢‹', price: '192', origin: 'å°å°¼' },
            { cn: 'CAFFINOæ³¡æ²«å’–å•¡ (ç‰¹ç´š)', en: 'CAFFINO Dark Cappuccino', category: 'INSTANT_MIXES', details: '25 g x 6s x 24è¢‹', price: '192', origin: 'å°å°¼' },
            { cn: 'é›€å·¢å³æº¶å’–å•¡ (200g)', en: 'NESCAFÃ‰ instant coffee powder 200g', category: 'INSTANT_MIXES', details: '200 g x 12æ¨½', price: '384', origin: 'æ–°åŠ å¡' },
            { cn: 'é›€å·¢å³æº¶å’–å•¡ (500g)', en: 'NESCAFÃ‰ instant coffee powder 500g', category: 'INSTANT_MIXES', details: '500 g x 6', price: '462', origin: 'ä¸­åœ‹' },
            { cn: 'é›€å·¢é‡‘ç‰Œå’–å•¡', en: 'NESCAFÃ‰ GOLD', category: 'INSTANT_MIXES', details: '190 g x 6s', price: '342', origin: 'é¦¬ä¾†è¥¿äº' },
            { cn: 'é›€å·¢3åˆ1å’–å•¡ (47æ¢ï¼‰', en: 'NESCAFÃ‰ 3 in 1 instant coffee (47s)', category: 'INSTANT_MIXES', details: '19 g x 47s x 18è¢‹', price: '738', origin: 'æ–°åŠ å¡' },
            { cn: 'èˆŠè¡—åŸ¸3åˆ1ç™½å’–å•¡ (ç¶“å…¸)', en: 'OLD TOWN WHITE COFFEE (Classic)', category: 'INSTANT_MIXES', details: '38 g x 15s x 20è¢‹', price: '600.00', origin: 'é¦¬ä¾†è¥¿äº' },
            { cn: 'èˆŠè¡—åŸ¸3åˆ1ç™½å’–å•¡ (ç‰¹æ¿ƒ)', en: 'OLD TOWN WHITE COFFEE (Rich)', category: 'INSTANT_MIXES', details: '35 g x 15s x 20è¢‹', price: '600.00', origin: 'é¦¬ä¾†è¥¿äº' },
            { cn: 'èˆŠè¡—åŸ¸3åˆ1ç™½å’–å•¡ (æ¦›æœ)', en: 'OLD TOWN WHITE COFFEE (Hazelnut)', category: 'INSTANT_MIXES', details: '38 g x 15s x 20è¢‹', price: '600.00', origin: 'é¦¬ä¾†è¥¿äº' },
            { cn: 'èˆŠè¡—åŸ¸3åˆ1ç™½å’–å•¡ (ä½ç³–)', en: 'OLD TOWN WHITE COFFEE (Less Sugar)', category: 'INSTANT_MIXES', details: '35 g x 15s x 20è¢‹', price: '600.00', origin: 'é¦¬ä¾†è¥¿äº' },
            { cn: 'èˆŠè¡—åŸ¸2åˆ1ç™½å’–å•¡ (ç„¡ç³–)', en: 'OLD TOWN WHITE COFFEE (2in1 No Sugar)', category: 'INSTANT_MIXES', details: '25 g x 15s x 20è¢‹', price: '600.00', origin: 'é¦¬ä¾†è¥¿äº' },
            { cn: 'èˆŠè¡—åŸ¸3åˆ1ç™½å’–å•¡ (è”—ç³–)', en: 'OLD TOWN WHITE COFFEE (Cane Sugar)', category: 'INSTANT_MIXES', details: '36 g x 15s x 20è¢‹', price: '600.00', origin: 'é¦¬ä¾†è¥¿äº' },
            { cn: 'èˆŠè¡—åŸ¸ç™½å¥¶èŒ¶', en: 'OLD TOWN WHITE MILKTEA', category: 'INSTANT_MIXES', details: '35 g x 13s x 20è¢‹', price: '600.00', origin: 'é¦¬ä¾†è¥¿äº' },
            { cn: 'GADJAH æ»´å’–å•¡', en: 'GADJAH DRIP COFFEE', category: 'INSTANT_MIXES', details: '7.5G x 6 x 24', price: '312.00', origin: 'å°å°¼' },
            { cn: 'é›€å·¢3åˆ1å’–å•¡ (30åŒ…)', en: 'NESCAFÃ‰ 3 in 1 instant coffee (30s)', category: 'INSTANT_MIXES', details: '24åŒ…x30 x 19 g', price: '648', origin: 'é¦¬ä¾†è¥¿äº' },
            { cn: 'ç«‹é “é‡‘è£å€é†‡å¥¶èŒ¶', en: 'LIPTON Milk Tea Gold', category: 'INSTANT_MIXES', details: '24åŒ…x16.5g x 12', price: '396.00', origin: 'ä¸­åœ‹' },
            
            // --- INSTANT COFFEE MILKTEA 2.csv --- (INSTANT_MIXES)
            { cn: 'æ¾¤åˆæ€¡ä¿ç™½å’–å•¡2åˆ1 (ç„¡ç³–)', en: 'Chek Hup Ipoh White Coffee 2 in 1 (No Sugar)', category: 'INSTANT_MIXES', details: '30g x 12s x 20è¢‹', price: '600', origin: 'é¦¬ä¾†è¥¿äº' },
            { cn: 'æ¾¤åˆæ€¡ä¿ç™½å’–å•¡3åˆ1 (é¦™æ¿ƒ)', en: 'Chek Hup 3 in 1 Ipoh White Coffee (Rich & Creamy)', category: 'INSTANT_MIXES', details: '40g x 12s x 20è¢‹', price: '600', origin: 'é¦¬ä¾†è¥¿äº' },
            { cn: 'æ¾¤åˆæ€¡ä¿ç™½å’–å•¡3åˆ1 (åŸå‘³)', en: 'Chek Hup Ipoh White Coffee 3 in 1 (Original)', category: 'INSTANT_MIXES', details: '40g x 12s x 20è¢‹', price: '600', origin: 'é¦¬ä¾†è¥¿äº' },
            { cn: 'æ¾¤åˆæ€¡ä¿ç™½å’–å•¡3åˆ1 (å°‘ç³–)', en: 'Chek Hup Ipoh White Coffee 3 in 1 (Less sugar)', category: 'INSTANT_MIXES', details: '40g x 12s x 20è¢‹', price: '600', origin: 'é¦¬ä¾†è¥¿äº' },
            { cn: 'æ¾¤åˆ3åˆ1å¥¶è¼', en: 'Chek Hup Ipoh Milk Tea 3 in 1', category: 'INSTANT_MIXES', details: '40g x 12s x 20è¢‹', price: '600', origin: 'é¦¬ä¾†è¥¿äº' },
            { cn: 'å’–å•¡å…ˆç”Ÿ3åˆ1 å³æº¶å’–å•¡', en: 'Mr. Coffee 3-in-1 Instant Coffee', category: 'INSTANT_MIXES', details: '20g x 40s x 20è¢‹', price: '640', origin: 'é¦¬ä¾†è¥¿äº' },
            { cn: 'å¥¶èŒ¶å…ˆç”Ÿ3åˆ1å³æº¶å¥¶èŒ¶', en: 'Mr. Milk Tea 3-in-1 Milk tea', category: 'INSTANT_MIXES', details: '20g x 30s x 24è¢‹', price: '825', origin: 'é¦¬ä¾†è¥¿äº' },
            { cn: 'UCC 666 ç²¾é¸å³æº¶å’–å•¡', en: 'UCC 666 Instant Coffee', category: 'INSTANT_MIXES', details: '100G x 12æ”¯', price: '240', origin: 'è¶Šå—' },
            { cn: 'å£©ç¾…å–œå¤šç¾ç™½å’–å•¡ (åŸå‘³)', en: 'Hicomi White Coffee (Original)', category: 'INSTANT_MIXES', details: '40g x 15s x 20è¢‹', price: '600', origin: 'é¦¬ä¾†è¥¿äº' },
            { cn: 'å£©ç¾…å–œå¤šç¾3åˆ1è²“å±±ç‹æ¦´æ§¤ç™½å’–å•¡', en: 'Hicomi White Coffee (Durian)', category: 'INSTANT_MIXES', details: '38g x 15s x 20è¢‹', price: '600', origin: 'é¦¬ä¾†è¥¿äº' },
            { cn: 'å£©ç¾…å–œå¤šç¾2åˆ1 ç™½å’–å•¡ (ç„¡ç³–)', en: 'Hicomi White Coffee 2 in 1 (No Sugar)', category: 'INSTANT_MIXES', details: '25g x 15s x 20è¢‹', price: '600', origin: 'é¦¬ä¾†è¥¿äº' },
            { cn: 'å£©ç¾…å–œå¤šç¾3åˆ1 ç™½å’–å•¡ (ç‰¹æ¿ƒ)', en: 'Hicomi White Coffee (Bold)', category: 'INSTANT_MIXES', details: '40g x 15s x 20è¢‹', price: '600', origin: 'é¦¬ä¾†è¥¿äº' },
            { cn: 'äºç™¼é‡‘ç‰Œç™½å’–å•¡', en: 'Ah Huat White Coffee Medal', category: 'INSTANT_MIXES', details: '38g x 15s x 20è¢‹', price: '580', origin: 'é¦¬ä¾†è¥¿äº' },
            { cn: 'äºç™¼ç‰¹æ¿ƒç™½å’–å•¡', en: 'Ah Huat White Coffee Rich', category: 'INSTANT_MIXES', details: '38g x 15s x 20è¢‹', price: '580', origin: 'é¦¬ä¾†è¥¿äº' },
            { cn: 'äºç™¼æ¦›æœè”—ç³–ç™½å’–å•¡', en: 'Ah Huat White Coffee Cane Sugar', category: 'INSTANT_MIXES', details: '38g x 15s x 20è¢‹', price: '580', origin: 'é¦¬ä¾†è¥¿äº' },
            { cn: 'äºç™¼ä½è„‚ç™½å’–å•¡', en: 'Ah Huat White Coffee Low fat', category: 'INSTANT_MIXES', details: '32g x 15s x 20è¢‹', price: '580', origin: 'é¦¬ä¾†è¥¿äº' },
            
            // --- INSTANT COFFEE MILKTEA 3.csv --- (INSTANT_MIXES / DRINKS_DAIRY)
            { cn: 'GOOD DAY3åˆ1å³æº¶å’–å•¡ (æ¦›å­)', en: 'GOOD DAY INSTANT FLAVOUR COFFEE (Hazelnut)', category: 'INSTANT_MIXES', details: '20 g x 30s x 12è¢‹', price: '252', origin: 'å°å°¼' },
            { cn: 'GOOD DAY3åˆ1å³æº¶å’–å•¡ (æœ±å¤åŠ›)', en: 'GOOD DAY INSTANT FLAVOUR COFFEE (Chocolate)', category: 'INSTANT_MIXES', details: '20 g x 30s x 12è¢‹', price: '252', origin: 'å°å°¼' },
            { cn: 'GOOD DAY3åˆ1å³æº¶å’–å•¡ (è«å¡)', en: 'GOOD DAY INSTANT FLAVOUR COFFEE (Mocha)', category: 'INSTANT_MIXES', details: '20 g x 30s x 12è¢‹', price: '252', origin: 'å°å°¼' },
            { cn: 'GOOD DAY3åˆ1å³æº¶å’–å•¡ (åŸå‘³)', en: 'GOOD DAY INSTANT FLAVOUR COFFEE (Original)', category: 'INSTANT_MIXES', details: '20 g x 30s x 12è¢‹', price: '252', origin: 'å°å°¼' },
            { cn: 'GOOD DAY3åˆ1å³æº¶å’–å•¡ (é›²å°¼æ‹¿)', en: 'GOOD DAY INSTANT FLAVOUR COFFEE (Vanilla)', category: 'INSTANT_MIXES', details: '20 g x 30s x 12è¢‹', price: '252', origin: 'å°å°¼' },
            { cn: 'é›€å·¢å’–å•¡ä¼´ä¾¶400 g', en: 'NestlÃ© Coffee-mate 400g', category: 'INSTANT_MIXES', details: '400 g x 15æ¨½', price: '232.5', origin: 'æ³°åœ‹' },
            { cn: 'é›€å·¢å’–å•¡ä¼´ä¾¶450 g', en: 'NestlÃ© Coffee-mate 450g', category: 'INSTANT_MIXES', details: '450 g x 24è¢‹', price: '324', origin: 'æ³°åœ‹' },
            { cn: 'é›€å·¢å’–å•¡ä¼´ä¾¶1å…¬æ–¤', en: 'NestlÃ© Coffee-mate 1kg', category: 'INSTANT_MIXES', details: '1å…¬æ–¤ x 12è¢‹', price: '360', origin: 'æ³°åœ‹' },
            { cn: 'G7-3åˆ1å’–å•¡', en: 'G7 3 in 1 Instant coffee', category: 'INSTANT_MIXES', details: '10 x 50s', price: '395', origin: 'è¶Šå—' },
            { cn: 'é›€å·¢ç¾ç¥¿ (ç½è£-400g)', en: 'Milo 400g in Tin', category: 'INSTANT_MIXES', details: '400 g x 24 can', price: '480', origin: 'é¦¬ä¾†è¥¿äº' },
            { cn: 'é›€å·¢ç¾ç¥¿ (è¢‹è£-1kg)', en: 'Milo 1kg in Bag', category: 'INSTANT_MIXES', details: '1å…¬æ–¤ x 12è¢‹', price: '474', origin: 'é¦¬ä¾†è¥¿äº' },
            { cn: 'é›€å·¢ç¾ç¥¿1.8å…¬æ–¤', en: 'Milo 1.8kg in Tin', category: 'INSTANT_MIXES', details: '1.8å…¬æ–¤ x 6 can', price: '468', origin: 'é¦¬ä¾†è¥¿äº' },
            { cn: 'é›€å·¢ç¾ç¥¿3åˆ1 (ç¨ç«‹åŒ…è£)', en: 'Milo 3 in 1 sachets', category: 'INSTANT_MIXES', details: '35 g x 18s x18è¢‹', price: '648', origin: 'é¦¬ä¾†è¥¿äº' },
            { cn: 'é˜¿è¯ç”° 400 g', en: 'Ovaltine 400g', category: 'INSTANT_MIXES', details: '400 g x 12æ¨½', price: '264', origin: 'æ³°åœ‹' },
            { cn: 'é˜¿è¯ç”° 1.15å…¬æ–¤ (ä¸Šæµ·ç‰ˆ)', en: 'Ovaltine 1.15kg (Shanghai)', category: 'INSTANT_MIXES', details: '1.15å…¬æ–¤ x 6 can', price: '342', origin: 'ä¸­åœ‹' },
            { cn: 'é˜¿è¯ç”°3åˆ1 (ç¨ç«‹åŒ…è£)', en: 'Ovaltine 3in1 sachets', category: 'INSTANT_MIXES', details: '30 g x 20s x12è¢‹', price: '324', origin: 'ä¸­åœ‹' },
            { cn: 'å¥½ç«‹å…‹', en: 'Horlicks Powder', category: 'INSTANT_MIXES', details: '2å…¬æ–¤ x 6 can', price: '560', origin: 'æ³°åœ‹' },
            { cn: 'å¥½ç«‹å…‹æœ±å¤åŠ›', en: 'Horlicks Chocolate Powder', category: 'INSTANT_MIXES', details: '400 g X24', price: '480', origin: 'é¦¬ä¾†è¥¿äº' },
            { cn: 'å‰ç™¾åˆ©æœ±å¤åŠ›ç²‰', en: 'Cadbury Drinking Chocolate', category: 'INSTANT_MIXES', details: '500 g x 6 can', price: '185', origin: 'è‹±åœ‹' },
            
            // --- ç½é ­é£Ÿå“(åˆé¤è‚‰).csv --- (CANNED_MEAT)
            { cn: 'é•·åŸç‰Œç«è…¿è±¬è‚‰ (198g)', en: 'Greatwall Pork and Ham 198g', category: 'CANNED_MEAT', details: '(198g x 36ç½) x2', price: '792', origin: 'ä¸­åœ‹' },
            { cn: 'é•·åŸç‰Œç«è…¿è±¬è‚‰ (340g)', en: 'Greatwall Pork and Ham 340g', category: 'CANNED_MEAT', details: '(340g x 24ç½) x2', price: '840', origin: 'ä¸­åœ‹' },
            { cn: 'æ¨‚å¤©ç‰¹ç´šåˆé¤è‚‰', en: 'Lotte Luncheon Meat Premium', category: 'CANNED_MEAT', details: '340g x 24ç½', price: '336.00', origin: 'éŸ“åœ‹' },
            { cn: 'éŸ“åŸéŸ“åœ‹åˆé¤è‚‰', en: 'Hansung Korean Luncheon Meat', category: 'CANNED_MEAT', details: '340g x 24ç½', price: '288.00', origin: 'éŸ“åœ‹' },
            { cn: 'å¤©é¾ç‰Œåˆé¤è‚‰', en: 'Skydragon Luncheon Meat', category: 'CANNED_MEAT', details: '397g x 48ç½', price: '560', origin: 'ä¸­åœ‹' },
            { cn: 'å¤©é¾ç‰Œç«è…¿è±¬è‚‰ (198g)', en: 'Skydragon Pork and Ham 198g', category: 'CANNED_MEAT', details: '(198g x 36ç½) x2', price: '710', origin: 'ä¸­åœ‹' },
            { cn: 'å¤©é¾ç‰Œç«è…¿è±¬è‚‰ (340g)', en: 'Skydragon Pork and Ham 340g', category: 'CANNED_MEAT', details: '(340g x 24ç½) x2', price: '710', origin: 'ä¸­åœ‹' },
            { cn: 'çå¯¶é›åˆé¤è‚‰', en: 'JUMBO Chicken Luncheon Meat', category: 'CANNED_MEAT', details: '397g x 24 x 2', price: '540', origin: 'ä¸­åœ‹' },
            { cn: 'çå¯¶åˆé¤è‚‰', en: 'JUMBO Luncheon Meat (198g)', category: 'CANNED_MEAT', details: '198g x 12 x 3 x 2', price: '520', origin: 'ä¸­åœ‹' },
            { cn: 'æ¸›é¹½åˆé¤è‚‰', en: 'Spam (Less Sodium)', category: 'CANNED_MEAT', details: '8s x 340g', price: '200', origin: 'ç¾åœ‹' },
            { cn: 'å¤©å£‡ç‰Œç«è…¿è±¬è‚‰ (æ˜“æ‹‰ç½ 198g)', en: 'HEAVEN TEMPLE Pork and Ham (EASY OPEN 198g)', category: 'CANNED_MEAT', details: '(198g x 36ç½) x2', price: '760', origin: 'ä¸­åœ‹' },
            { cn: 'å¤©å£‡ç‰Œç«è…¿è±¬è‚‰ (340g)', en: 'HEAVEN TEMPLE Pork and Ham 340g', category: 'CANNED_MEAT', details: '(340g x 24ç½) x2', price: '840', origin: 'ä¸­åœ‹' },
            { cn: 'å¤©å£‡ç‰Œç«è…¿è±¬è‚‰ (397g)', en: 'HEAVEN TEMPLE Pork and Ham 397g', category: 'CANNED_MEAT', details: '(397g x 24ç½) x2', price: '880', origin: 'ä¸­åœ‹' },
            { cn: 'æ¢…æ—ç‰Œåˆé¤è‚‰ (170gx3)', en: 'Marling Luncheon Meat (3x170g)', category: 'CANNED_MEAT', details: '[(3ç½ x170g ) x8æ‰]x4', price: '704', origin: 'ä¸­åœ‹' },
            { cn: 'æ¢…æ—ç‰Œå„ªè³ªç«è…¿åˆé¤è‚‰', en: 'Marling Luncheon Meat premium', category: 'CANNED_MEAT', details: '(340g x 24ç½) x2', price: '638', origin: 'ä¸­åœ‹' },
            { cn: 'æ¢…æ—ç‰Œåˆé¤è‚‰340g', en: 'Marling Luncheon Meat 340g', category: 'CANNED_MEAT', details: '(340g x 24ç½) x2', price: '480', origin: 'ä¸­åœ‹' },
            { cn: 'æ¢…æ—ç‰Œåˆé¤è‚‰198g', en: 'Marling Luncheon Meat 198g', category: 'CANNED_MEAT', details: '(198g x 36ç½) x2', price: '560', origin: 'ä¸­åœ‹' },
            { cn: 'æ¢…æ—ç‰Œåˆé¤è‚‰397g', en: 'Marling Luncheon Meat 397g', category: 'CANNED_MEAT', details: '397g x 48ç½', price: '624', origin: 'ä¸­åœ‹' },
            
            // --- èª¿å‘³æ–™ ï¼Œ ç½é ­é£Ÿå“ (é­š) ç½é ­é£Ÿå“ (äº”é¦™ã€å›é‹).csv --- (SEASONING_MISC / CANNED_MEAT)
            { cn: 'NUTELLAæ¦›å­é†¬ 350 g', en: 'Nutella Hazelnut Spread 350g', category: 'SEASONING_MISC', details: '350 g x 15æ¨½', price: '367', origin: 'ç¾åœ‹' },
            { cn: 'NUTELLAæ¦›å­é†¬ 750 g', en: 'Nutella Hazelnut Spread 750g', category: 'SEASONING_MISC', details: '750 g x 6æ¨½', price: '288', origin: 'ç¾åœ‹' },
            { cn: 'é ‚å¥½ç‰ŒèŠ±ç”Ÿé†¬ (å¹¼æ»‘) 16.3ç›å¸', en: 'Skippy Creamy Peanut Butter 16.3oz', category: 'SEASONING_MISC', details: '462 g x 12æ¨½', price: '320', origin: 'ç¾åœ‹' },
            { cn: 'é ‚å¥½ç‰ŒèŠ±ç”Ÿé†¬ (ç²—ç²’) 16.3ç›å¸', en: 'Skippy Chunky Peanut Butter 16.3oz', category: 'SEASONING_MISC', details: '462 g x 12æ¨½', price: '320', origin: 'ç¾åœ‹' },
            { cn: 'é ‚å¥½ç‰ŒèŠ±ç”Ÿé†¬ (å¹¼æ»‘) 1360 g', en: 'Skippy Creamy Peanut Butter 1360g', category: 'SEASONING_MISC', details: '1360 g x 6æ¨½', price: '288', origin: 'ç¾åœ‹' },
            { cn: 'é ‚å¥½ç‰ŒèŠ±ç”Ÿé†¬ (ç²—ç²’) 1360 g', en: 'Skippy Chunky Peanut Butter 1360g', category: 'SEASONING_MISC', details: '1360 g x 6æ¨½', price: '288', origin: 'ç¾åœ‹' },
            { cn: 'LIN ç ‚ç³– 2å…¬æ–¤', en: 'LIN Sugar 2kg', category: 'SEASONING_MISC', details: '2å…¬æ–¤ x 6åŒ…', price: '108', origin: 'æ³°åœ‹' },
            { cn: 'LIN ç ‚ç³– 5å…¬æ–¤', en: 'LIN Sugar 5kg', category: 'SEASONING_MISC', details: '5å…¬æ–¤ x 4åŒ…', price: '172', origin: 'æ³°åœ‹' },
            { cn: 'å®¶æ¨‚ç‰Œè¢‹è£é›ç²‰', en: 'Knorr Chicken Powder (Bag)', category: 'SEASONING_MISC', details: '1å…¬æ–¤ x 12åŒ…', price: '264', origin: 'ä¸­åœ‹' },
            { cn: 'ç æ±Ÿæ©‹ç‰Œè±†è±‰é¯ªé­š', en: 'Pearl River Bridge Fried Dace with Salted Black Beans', category: 'CANNED_MEAT', details: '(227 g x24ç½) x2', price: '960.00', origin: 'ä¸­åœ‹' },
            { cn: 'å¤©é¾ç‰Œè±†è±‰é¯ªé­š', en: 'Skydragon Fried Dace with Salted Black Beans', category: 'CANNED_MEAT', details: '(184 g x24ç½) x2', price: '480', origin: 'ä¸­åœ‹' },
            { cn: 'å¤é¾ç‰ŒåŸå‘³é»ƒèŠ±é­š', en: 'Yellow Croaker (Original)', category: 'CANNED_MEAT', details: '120 g x 24ç½', price: '240', origin: 'ä¸­åœ‹' },
            { cn: 'å¤é¾ç‰Œè±†è±‰é»ƒèŠ±é­š', en: 'Yellow Croaker (Salted Black Beans)', category: 'CANNED_MEAT', details: '120 g x 24ç½', price: '240', origin: 'ä¸­åœ‹' },
            { cn: 'å¤é¾ç‰Œä¸é¦™é­š', en: 'Gulong Anchovies', category: 'CANNED_MEAT', details: '110 g x 24æ¨½', price: '224', origin: 'ä¸­åœ‹' },
            { cn: 'å¤©é¾ç‰Œäº”é¦™è‚‰ä¸', en: 'Sky Dragon Spiced Pork Cubes', category: 'CANNED_MEAT', details: '(142 g x48ç½) x2', price: '810.00', origin: 'ä¸­åœ‹' },
            { cn: 'æ°´ä»™èŠ±ç‰Œäº”é¦™è‚‰ä¸', en: 'Narcissus Spiced Pork Cubes', category: 'CANNED_MEAT', details: '(142 g x48ç½) x2', price: '1050.00', origin: 'ä¸­åœ‹' },
            { cn: 'é‡‘éŒ¢-é‡‘çè±†è±‰é¯ªé­š 184G', en: 'Golden Coin Fried Dace with Salted Black Beans 184G', category: 'CANNED_MEAT', details: '(184g x 24) x2', price: '384.00', origin: 'ä¸­åœ‹' },
            
            // --- ç½é ­é£Ÿå“ï¼ˆå…¶ä»–).csv --- (CANNED_MEAT)
            { cn: 'å¤©é¾ç‰Œå’¸ç‰›è‚‰', en: 'Skydragon Corned Beef Round', category: 'CANNED_MEAT', details: '(240 g x 24ç½) x2', price: '560', origin: 'ä¸­åœ‹' },
            { cn: 'æ¢…æ—ç‰Œæ¦¨èœè‚‰çµ²', en: 'MaLing Pork & Preserved Vegetable', category: 'CANNED_MEAT', details: '(240 g x 24ç½) x2', price: '624', origin: 'ä¸­åœ‹' },
            { cn: 'å¤é¾ç‰Œé¦™ç‡œèŠ±ç”Ÿ', en: 'Gulong Braised Peanuts', category: 'CANNED_MEAT', details: '170 g x 48ç½', price: '240', origin: 'ä¸­åœ‹' },
            { cn: 'å¤é¾ç‰Œç‚’ä¸‰çµ²', en: 'Gulong Fried Shredded Meat and Vegetables', category: 'CANNED_MEAT', details: '198 g x48ç½', price: '504', origin: 'ä¸­åœ‹' },
            { cn: 'æ¢…æ—ç‰Œå›é‹è‚‰', en: 'Ma Ling Szechuan Sliced Pork', category: 'CANNED_MEAT', details: '(198g x 36ç½) x2', price: '700.00', origin: 'ä¸­åœ‹' },
            { cn: 'å¤é¾ç‰Œé¦™è‡è‚‰é†¬', en: 'Gulong Mushroom Meat Sauce', category: 'CANNED_MEAT', details: '180 g x 48ç½', price: '408', origin: 'ä¸­åœ‹' },
            { cn: 'å¤é¾ç‰Œç´…ç‡’æ’éª¨', en: 'Gulong Braised Spare Ribs', category: 'CANNED_MEAT', details: '256g x 48ç½', price: '800', origin: 'ä¸­åœ‹' },
            { cn: 'å¤é¾ç‰Œé¦™èœå¿ƒ', en: 'Gulong Pickled Cabbage Hearts', category: 'CANNED_MEAT', details: '170 g x 48', price: '240', origin: 'ä¸­åœ‹' },
            { cn: 'é•·åŸç‰Œå’¸ç‰›è‚‰', en: 'Greatwall Corned Beef Round', category: 'CANNED_MEAT', details: '340g x48 ç½', price: '840', origin: 'ä¸­åœ‹' },
            { cn: 'å¤é¾ç‰ŒèŠ±ç”Ÿæ¹¯', en: 'Gulong Peanut Soup', category: 'CANNED_MEAT', details: '312 g x48ç½', price: '278.4', origin: 'ä¸­åœ‹' },
            { cn: 'å¤é¾ç‰Œç´…ç‡’è±¬è‚‰', en: 'Gulong Braised Pork', category: 'CANNED_MEAT', details: '256 g x48ç½', price: '552', origin: 'ä¸­åœ‹' },
            { cn: 'å¤§é¾ç‰Œå›é‹è‚‰', en: 'Sky Dragon Sliced Pork in Szechuan Style', category: 'CANNED_MEAT', details: '(198g x 36ç½) x2', price: '684.00', origin: 'ä¸­åœ‹' },
            { cn: 'å¤é¾ç‰Œé¦™è‡è±¬è…³è…¿', en: 'Gulong Mushroom Pork Knuckle', category: 'CANNED_MEAT', details: '397g x 24', price: '480', origin: 'ä¸­åœ‹' },
            
            // --- æœ±å¤åŠ›2.csv --- (SNACKS_BISCUITS)
            { cn: 'å£«åŠ›æ¶è¿·ä½ æœ±å¤åŠ›', en: 'Sneakers Minis Chocolate', category: 'SNACKS_BISCUITS', details: '(227g x24s)', price: 'è«‹å‘æˆ‘å€‘æŸ¥è©¢ per enquiry', origin: 'æœªçŸ¥' },
            { cn: 'è¿·ä½ é»‘è‰²ä¸‰è§’æœ±å¤åŠ›', en: 'Toblerone Mini Black Chocolate', category: 'SNACKS_BISCUITS', details: '(200g x20s)', price: 'è«‹å‘æˆ‘å€‘æŸ¥è©¢ per enquiry', origin: 'ç‘å£«' },
            { cn: 'ä¸‰è§’ç‰›å¥¶æœ±å¤åŠ› (è¿·ä½ )', en: 'Toblerone Mini Milk Chocolate (Mini)', category: 'SNACKS_BISCUITS', details: '(100g x20s)x4.', price: 'è«‹å‘æˆ‘å€‘æŸ¥è©¢ per enquiry', origin: 'ç‘å£«' },
            { cn: 'ä¸‰è§’ç‰›å¥¶æœ±å¤åŠ› (åˆ†äº«è£)', en: 'Toblerone Milk Chocolate (Sharing)', category: 'SNACKS_BISCUITS', details: '160gåˆ†äº«åº„ x 12', price: 'è«‹å‘æˆ‘å€‘æŸ¥è©¢ per enquiry', origin: 'ç‘å£«' },
            { cn: 'ä¸‰è§’é»‘æœ±å¤åŠ› (100g)', en: 'Toblerone Black Chocolate (100g)', category: 'SNACKS_BISCUITS', details: '100g x4 x20s', price: 'è«‹å‘æˆ‘å€‘æŸ¥è©¢ per enquiry', origin: 'ç‘å£«' },
            { cn: 'ä¸‰è§’é»‘å·§g åŠ› (åˆ†äº«è£)', en: 'Toblerone Black Chocolate (Sharing)', category: 'SNACKS_BISCUITS', details: '160gåˆ†äº«åº„ x 12s', price: 'è«‹å‘æˆ‘å€‘æŸ¥è©¢ per enquiry', origin: 'ç‘å£«' },
            { cn: 'è¿·ä½ é»ƒè‰²ä¸‰è§’æœ±å¤', en: 'Toblerone Mini Chocolate (Yellow)', category: 'SNACKS_BISCUITS', details: '20åŒ…x200g', price: 'è«‹å‘æˆ‘å€‘æŸ¥è©¢ per enquiry', origin: 'ç‘å£«' },
            { cn: 'ä¸‰è§’ç™½è‰²æœ±å¤åŠ› (100g)', en: 'Toblerone White Chocolate (100g)', category: 'SNACKS_BISCUITS', details: '100g x20sx4.', price: 'è«‹å‘æˆ‘å€‘æŸ¥è©¢ per enquiry', origin: 'ç‘å£«' },
            { cn: 'ä¸‰è§’ç™½æœ±å¤åŠ› (360g)', en: 'Toblerone White Chocolate (360g)', category: 'SNACKS_BISCUITS', details: '360 X 10s', price: 'è«‹å‘æˆ‘å€‘æŸ¥è©¢ per enquiry', origin: 'ç‘å£«' },
            { cn: 'ä¸‰è§’æœ±å¤åŠ› æä»', en: 'Toblerone Nut Chocolate', category: 'SNACKS_BISCUITS', details: '360g x 10', price: 'è«‹å‘æˆ‘å€‘æŸ¥è©¢ per enquiry', origin: 'ç‘å£«' },
            { cn: 'è¿·ä½ ç™½è‰²ä¸‰è§’æœ±å¤åŠ›', en: 'Toblerone Mini White Chocolate', category: 'SNACKS_BISCUITS', details: '20sx200g', price: 'è«‹å‘æˆ‘å€‘æŸ¥è©¢ per enquiry', origin: 'ç‘å£«' },
            { cn: 'Orient æœ±å¤åŠ› (æ··åˆ)', en: 'Orient Chocolate (Mixed)', category: 'SNACKS_BISCUITS', details: '400g x 12', price: 'è«‹å‘æˆ‘å€‘æŸ¥è©¢ per enquiry', origin: 'åœŸè€³å…¶' },
        ];

        // Process raw data into the final PRODUCTS array
        const PRODUCTS = rawProductsData.map(p => {
            let isHot = false;
            // Hot Item logic
            if (p.cn.includes('åŠ›å£«é¦™çš‚') && p.cn.includes('(æ··åˆ)')) {
                isHot = true;
            } else if (p.cn.includes('é•·åŸç‰Œç«è…¿è±¬è‚‰') && p.details.includes('340g')) {
                isHot = true;
            } else if (p.cn.includes('é«˜éœ²æ½”ä¸‰å±¤åŠŸæ•ˆç‰™è†')) {
                isHot = true;
            } else if (p.cn.includes('æ¨‚å¤©ç‰¹ç´šåˆé¤è‚‰')) {
                isHot = true;
            } else if (p.cn.includes('CAFFINO æ³¡æ²«å’–å•¡ (ç¶“å…¸)')) {
                isHot = true;
            }

            const processedProduct = {
                id: generateId(p.cn, p.details),
                cn: p.cn,
                en: p.en,
                category: p.category,
                details: p.details,
                price: cleanPrice(p.price),
                origin: p.origin || 'æœªçŸ¥',
                isHot: isHot,
            };

            return processedProduct;
        }).map((p, index, array) => {
             // Second pass for true uniqueness check if needed, but for now we rely on the generated ID
             // If a product has a duplicate ID after the first pass, append index
             let count = 0;
             const originalId = p.id;
             while (array.filter(item => item.id === p.id).length > 1) {
                 p.id = originalId + '_' + count++;
             }
             return p;
        });
        
        // Expose PRODUCTS array for IIF generation
        window.PRODUCTS = PRODUCTS; 
        
        // --- Quickbooks/Inventory Mock functions ---

        // Function to simulate QuickBooks data fetch (Async operation)
        function fetchProductData(productId) {
            return new Promise(resolve => {
                setTimeout(() => { // Simulate network latency
                    const product = window.PRODUCTS.find(p => p.id === productId);
                    // Use static inventory level 100, except for enquiry items (-1)
                    const stock = MOCK_INVENTORY_SYSTEM.get(productId) || 0;
                    resolve({ ...product, stock });
                }, 50);
            });
        }

        // Function to simulate QuickBooks stock check (Real-time data feed)
        function checkInventory(productId) {
            return MOCK_INVENTORY_SYSTEM.get(productId) || 0;
        }

        // --- GLOBAL APP STATE & UI LOGIC ---
        let currentLang = 'cn'; // 'cn' for Traditional Chinese, 'en' for English
        let cart = {}; // { productId: quantity_in_cartons }
        let currentFilter = 'HOT_ITEMS';
        let isCartOpen = false;
        let lastOrderID = null; // Store the last order ID for QR code generation
        
        // ** WhatsApp ç›®æ¨™é›»è©±è™Ÿç¢¼ **
        const WHATSAPP_NUMBER = "65752256";

        const langDict = {
            appTitle: { cn: 'æ†ç«‹æ‰¹ç™¼è¨‚å–®ç³»çµ±', en: 'Nice One Wholesale Ordering' },
            companyName: { cn: 'æ†ç«‹ï¼ˆé¦™æ¸¯)æœ‰é™å…¬å¸', en: 'Nice One (HK) Ltd.' },
            orderingSystem: { cn: 'é›»å­è¨‚å–®ç³»çµ±', en: 'E-Ordering System' },
            product: { cn: 'ç”¢å“', en: 'Product' },
            details: { cn: 'è¦æ ¼', en: 'Details' },
            price: { cn: 'åƒ¹æ ¼(ç®±)', en: 'Price (Carton)' },
            origin: { cn: 'ç”¢åœ°', en: 'Origin' },
            stock: { cn: 'åº«å­˜', en: 'Stock' },
            quantity: { cn: 'è¨‚è³¼æ•¸é‡', en: 'Qty (Carton)' },
            addToCart: { cn: 'åŠ å…¥è¨‚å–®', en: 'Add to Order' },
            inStock: { cn: 'æœ‰è²¨', en: 'In Stock' },
            lowStock: { cn: 'è²¨é‡ç·Šå¼µ', en: 'Low Stock' },
            outOfStock: { cn: 'ç¼ºè²¨', en: 'Out of Stock' },
            perEnquiry: { cn: 'è«‹å‘æˆ‘å€‘æŸ¥è©¢', en: 'Price Upon Enquiry' },
            viewOrder: { cn: 'æŸ¥çœ‹è¨‚å–®', en: 'View Order' },
            cartTitle: { cn: 'å®¢æˆ¶è¨‚å–® (ç®±)', en: 'Customer Order (Cartons)' },
            totalItems: { cn: 'ç¸½è¨‚è³¼ç®±æ•¸', en: 'Total Cartons' },
            totalAmount: { cn: 'é è¨ˆç¸½é‡‘é¡', en: 'Est. Total Amount' },
            emptyCart: { cn: 'è¨‚å–®ç‚ºç©ºï¼Œè«‹åŠ å…¥è²¨å“', en: 'Your order is empty. Please add items.' },
            placeOrder: { cn: 'ç¢ºèªä¸¦æäº¤è¨‚å–® (ERPæ¨¡æ“¬)', en: 'Submit Order (ERP Sim.)' },
            sendOrder: { cn: 'ç™¼é€è¨‚å–®è‡³ WhatsApp (å«QR)', en: 'Send Order via WhatsApp (w/QR)' }, 
            downloadIIF: { cn: 'ä¸‹è¼‰ IIF æ–‡ä»¶ (Quickbooks)', en: 'Download IIF (Quickbooks)' }, // IIF æŒ‰éˆ•æ–‡æœ¬
            orderSuccess: { cn: 'è¨‚å–®è™•ç†æˆåŠŸï¼è«‹ä½¿ç”¨ä¸‹æ–¹æŒ‰éˆ•é€²è¡Œä¸‹ä¸€æ­¥ã€‚', en: 'Order processed successfully! Use the buttons below for next steps.' },
            qtyMustBePositive: { cn: 'è¨‚è³¼æ•¸é‡å¿…é ˆç‚ºæ­£æ•´æ•¸', en: 'Order quantity must be a positive integer.' },
            qtyExceedsStock: { cn: 'è¨‚è³¼æ•¸é‡è¶…å‡ºåº«å­˜', en: 'Order quantity exceeds current stock.' },
            categoryFilter: { cn: 'ç”¢å“åˆ†é¡', en: 'Product Category' },
            aboutQBLayer: { cn: 'QuickBooks æ•¸æ“šå±¤æ¨¡æ“¬: æ­¤ App æ¨¡æ“¬äº†å¾ QuickBooks ç²å–å³æ™‚åƒ¹æ ¼å’Œåº«å­˜çš„èƒ½åŠ›ã€‚', en: 'QuickBooks Data Layer Simulation: This app simulates fetching real-time price and inventory from QuickBooks.' },
            whatsappMessageTitle: { cn: "æ–°è¨‚å–® (App ä¸‹å–®) - æ†ç«‹æ‰¹ç™¼", en: "New Order (App Order) - Nice One Wholesale" },
            whatsappMessageSubtotal: { cn: "é è¨ˆç¸½é‡‘é¡", en: "Est. Subtotal" },
            whatsappMessageTotalCartons: { cn: "ç¸½ç®±æ•¸", en: "Total Cartons" },
            whatsappMessageNote: { cn: "è«‹ç›¡å¿«è·Ÿé€²æ­¤è¨‚å–®ä¸¦å®‰æ’é€è²¨ã€‚", en: "Please follow up on this order and arrange delivery." },
            customerName: { cn: "å®¢æˆ¶åç¨±", en: "Customer Name" },
            customerID: { cn: "å®¢æˆ¶ç·¨è™Ÿ", en: "Customer ID" },
            customerAddress: { cn: "é€è²¨åœ°å€", en: "Delivery Address" },
            customerPhone: { cn: "è¯ç¹«é›»è©±", en: "Phone Number" },
            customerInfo: { cn: "å®¢æˆ¶è³‡æ–™è¨­å®š (å¿…å¡«)", en: "Customer Information (Required)" },
            customerSave: { cn: "å„²å­˜å®¢æˆ¶è³‡æ–™", "en": "Save Customer Data" },
            customerSaveSuccess: { cn: "å®¢æˆ¶è³‡æ–™å·²å®‰å…¨å„²å­˜ã€‚", en: "Customer data saved securely." },
            customerInfoFillWarning: { cn: "è«‹ç¢ºä¿å®¢æˆ¶åç¨±, å®¢æˆ¶ç·¨è™Ÿ, å’Œé€è²¨åœ°å€å·²å¡«å¯«ã€‚", en: "Please ensure Customer Name, ID, and Address are filled." },
            fillCustomerInfo: { cn: "è«‹å…ˆè¨­å®šå®¢æˆ¶è³‡æ–™æ‰èƒ½ä¸‹å–®", en: "Please set customer information before placing an order." },
            orderID: { cn: "è¨‚å–®ç·¨è™Ÿ", en: "Order ID" },
            passwordTitle: { cn: "å­˜å–å¯†ç¢¼é©—è­‰", en: "Access Code Verification" },
            passwordDesc: { cn: "è«‹è¼¸å…¥å­˜å–å¯†ç¢¼ä»¥é€²å…¥ç³»çµ±ã€‚", en: "Please enter the access password to enter the system." },
            passwordVerify: { cn: "é©—è­‰å¯†ç¢¼ä¸¦ç™»å…¥", en: "Verify Password and Log In" },
            enquiryWarningSubmit: { cn: "âš ï¸ è¨‚å–®åŒ…å«ç„¡åº«å­˜æˆ–éœ€æŸ¥è©¢å ±åƒ¹è²¨å“ã€‚è«‹æ³¨æ„ï¼Œå¯¦éš›åº«å­˜å’Œåƒ¹æ ¼éœ€å¾…ç¢ºèªã€‚", en: "âš ï¸ Order includes out-of-stock or enquiry items. Actual stock/price must be confirmed."},
            generateNote: { cn: "âœ¨ ç”Ÿæˆå‚™è¨»å»ºè­°", en: "âœ¨ Generate Note Suggestion" },
            notePlaceholder: { cn: "è¼¸å…¥é¡å¤–è¨‚å–®å‚™è¨» (ä¾‹å¦‚: ç·Šæ€¥/ç‰¹å¿«ä»¶)", en: "Enter additional order notes (e.g., URGENT/Express)" },
            noteGenerationFailed: { cn: "æœªèƒ½ç”Ÿæˆå»ºè­°å‚™è¨»ï¼Œè«‹æ‰‹å‹•è¼¸å…¥ã€‚", en: "Failed to generate suggested note, please enter manually."}
        };

        // Expose T function globally
        window.T = T; 

        // --- LLM Gemini API Integration ---
        async function generateOrderNote() {
            if (!window.isLoggedIn) {
                showModal("è«‹å…ˆç™»å…¥ã€‚", 'error');
                return;
            }
            if (Object.keys(cart).length === 0) {
                showModal(T('emptyCart'), 'error');
                return;
            }
            
            // Check if API Key is configured
            if (!apiKey || apiKey === "") {
                 showModal("Gemini API Key æœªè¨­ç½®ã€‚è«‹åœ¨ç¨‹å¼ç¢¼ä¸­é…ç½® apiKeyã€‚", 'error');
                 return;
            }
            
            const noteInput = document.getElementById('order-notes');
            noteInput.value = window.T('noteGenerationFailed'); // Set initial placeholder

            // 1. Summarize cart details for the prompt
            const orderSummary = {
                customer: window.customerData.customerID,
                totalCartons: Object.values(cart).reduce((sum, qty) => sum + qty, 0),
                items: Object.keys(cart).map(itemId => {
                    const item = window.PRODUCTS.find(p => p.id === itemId);
                    const qty = cart[itemId];
                    const stock = checkInventory(itemId);
                    // Categorize item status for LLM analysis
                    const status = item.price === 9999.00 ? 'Price Enquiry' : (stock <= 50 ? 'Low Stock' : 'In Stock');
                    return `${item.cn} (Qty: ${qty}, Status: ${status})`;
                }).join('; ')
            };

            const systemPrompt = `Act as an expert wholesale logistics coordinator for Nice One (HK) Ltd. Your task is to analyze a sales order summary and provide a brief (max 20 Chinese characters, max 1 line) but highly relevant internal operation note or warning based on the items, customer ID, and status. Focus on risks like bulk, fragility, special pricing, or low stock. Respond only with the suggested note in Traditional Chinese.`;

            const userQuery = `Analyze this order and suggest an internal operational note: Customer ID: ${orderSummary.customer}, Total Cartons: ${orderSummary.totalCartons}, Details: ${orderSummary.items}`;
            
            // Show loading state
            noteInput.value = 'ç”Ÿæˆä¸­...'; 
            
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                systemInstruction: {
                    parts: [{ text: systemPrompt }]
                },
                config: {
                    maxOutputTokens: 50,
                }
            };

            try {
                 const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();
                const generatedText = result?.candidates?.[0]?.content?.parts?.[0]?.text?.trim() || window.T('noteGenerationFailed');
                
                noteInput.value = generatedText.replace(/\*/g, ''); // Clean up any markdown stars

            } catch (error) {
                console.error("Gemini API Error:", error);
                noteInput.value = window.T('noteGenerationFailed');
                window.showModal("ç”Ÿæˆå‚™è¨»å¤±æ•—ï¼Œè«‹æª¢æŸ¥ API Key æˆ–ç¶²è·¯é€£ç·šã€‚", 'error');
            }
        }
        
        // --- UI RENDERING FUNCTIONS ---

        function getStockStatus(stock) {
            let status = { text: '', color: '' };
            if (stock > 50) {
                status.text = T('inStock');
                status.color = 'text-green-600 bg-green-100';
            } else if (stock >= 0) { // å…è¨± 0 åº«å­˜é¡¯ç¤º
                status.text = T('lowStock');
                status.color = 'text-yellow-600 bg-yellow-100';
            } else {
                status.text = T('outOfStock'); // é‡å° -1 (æŸ¥è©¢åƒ¹æ ¼) ç”¢å“
                status.color = 'text-red-600 bg-red-100';
            }
            return `<span class="px-2 py-0.5 text-xs font-semibold rounded-full ${status.color}">${status.text}</span>`;
        }

        async function renderProducts(categoryKey) {
            currentFilter = categoryKey;
            const container = document.getElementById('product-list');
            const filteredProducts = window.PRODUCTS.filter(p =>
                categoryKey === 'HOT_ITEMS' ? p.isHot : p.category === categoryKey
            );

            // Update category active state
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('bg-blue-600', 'text-white');
                btn.classList.add('bg-gray-100', 'text-gray-800');
            });
            document.getElementById(`cat-btn-${categoryKey}`).classList.remove('bg-gray-100', 'text-gray-800');
            document.getElementById(`cat-btn-${categoryKey}`).classList.add('bg-blue-600', 'text-white');


            if (filteredProducts.length === 0) {
                container.innerHTML = `<p class="text-center text-lg text-gray-500 py-10" data-lang-key="noProduct">ç›®å‰æ­¤åˆ†é¡æ²’æœ‰ç”¢å“ã€‚</p>`;
                updateUILanguage();
                return;
            }

            // Fetch simulated real-time data for display
            const productPromises = filteredProducts.map(p => fetchProductData(p.id));
            const productsWithData = await Promise.all(productPromises);

            container.innerHTML = productsWithData.map(p => {
                const stock = p.stock;
                const productName = currentLang === 'cn' ? p.cn : p.en;
                // For English details, use the simple extraction logic
                const productDetails = currentLang === 'cn' ? p.details : p.details.split('(')[1] ? p.details.split('(')[1].replace(')', '') : p.details;
                const isEnquiryPrice = p.price === 9999.00;
                
                const priceDisplay = isEnquiryPrice 
                    ? `<span class="text-xl font-extrabold text-red-500 mb-3">${T('perEnquiry')}</span>`
                    : `<span class="text-xl font-extrabold text-indigo-600 mb-3">HK$${p.price.toFixed(2)}</span>`;

                // å…è¨±ä¸‹å–® (remove disabled attribute)
                const isItemDisabled = false; // æ ¹æ“šæ–°éœ€æ±‚ï¼Œä¸å†ç¦ç”¨
                const inputMinQty = '1'; 

                return `
                    <div class="bg-white p-4 rounded-lg shadow-lg hover:shadow-xl transition duration-300 border border-gray-100 flex flex-col justify-between">
                        <div>
                            <div class="flex justify-between items-start mb-2">
                                <h3 class="text-lg font-bold text-blue-800">${productName}</h3>
                                ${isEnquiryPrice ? '' : getStockStatus(stock)}
                            </div>
                            <p class="text-sm text-gray-500 mb-1">${p.details}</p>
                            <p class="text-sm text-gray-500 mb-3">${T('origin')}: ${p.origin}</p>
                        </div>
                        
                        <div class="mt-4 pt-2 border-t border-gray-100">
                            ${priceDisplay}
                            
                            <form onsubmit="handleAddToCart(event, '${p.id}', ${stock})" class="flex space-x-2 mt-2">
                                <div class="flex-grow">
                                    <label for="qty-${p.id}" class="sr-only">${T('quantity')}</label>
                                    <input type="number" id="qty-${p.id}" min="${inputMinQty}" value="1" placeholder="${T('quantity')}"
                                        class="w-full p-2 border border-gray-300 rounded-lg text-sm focus:ring-blue-500 focus:border-blue-500"
                                        style="-moz-appearance: textfield;">
                                </div>
                                <button type="submit" 
                                    class="flex-shrink-0 bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg transition duration-150 shadow-md">
                                    ${T('addToCart')}
                                </button>
                            </form>
                            ${isEnquiryPrice ? '<p class="text-xs text-red-500 mt-1">æ­¤è²¨å“éœ€æŸ¥è©¢å ±åƒ¹ï¼Œæäº¤å¾Œéœ€å¾…ç¢ºèªåƒ¹æ ¼ã€‚</p>' : ''}
                        </div>
                    </div>
                `;
            }).join('');
            updateUILanguage();
        }

        function renderCart() {
            const cartItemsContainer = document.getElementById('cart-items');
            const totalCartonsEl = document.getElementById('total-cartons');
            const totalAmountEl = document.getElementById('total-amount');
            const placeOrderBtn = document.getElementById('place-order-btn');
            const orderActionsContainer = document.getElementById('order-actions'); // New container

            const itemIds = Object.keys(cart);
            let totalCartons = 0;
            let totalAmount = 0;
            let containsEnquiryItemOrZeroStock = false; // Check for enquiry OR zero/negative stock items
            
            // Determine if customer data is minimally filled
            const isCustomerSetup = window.customerData && 
                                   window.customerData.customerID !== "GUEST001" && 
                                   window.customerData.name && 
                                   window.customerData.address !== "N/A";

            if (itemIds.length === 0) {
                cartItemsContainer.innerHTML = `<p class="text-center text-gray-500 p-4">${T('emptyCart')}</p>`;
                totalCartonsEl.textContent = '0';
                totalAmountEl.textContent = 'HK$0.00';
                placeOrderBtn.classList.remove('hidden');
                orderActionsContainer.classList.add('hidden'); // Hide all post-submit actions
                placeOrderBtn.disabled = true;
                return;
            }

            let cartHtml = itemIds.map(itemId => {
                const item = window.PRODUCTS.find(p => p.id === itemId);
                const qty = cart[itemId];
                const stock = checkInventory(itemId); // Check current stock
                
                if (!item) return '';
                
                const isEnquiryPrice = item.price === 9999.00;
                if (isEnquiryPrice || stock <= 50) { // åº«å­˜ç·Šå¼µä¹Ÿè¦–ç‚ºéœ€è¦è­¦å‘Š
                    containsEnquiryItemOrZeroStock = true;
                }

                const productName = currentLang === 'cn' ? item.cn : item.en;
                const itemTotal = isEnquiryPrice ? 0 : item.price * qty;
                totalCartons += qty;
                totalAmount += itemTotal;

                const priceText = isEnquiryPrice 
                    ? `<span class="font-bold text-red-500">${T('perEnquiry')}</span>`
                    : `<span class="font-bold text-sm text-gray-700 w-16 text-right">HK$${itemTotal.toFixed(2)}</span>`;

                return `
                    <div class="flex items-center justify-between p-3 border-b border-gray-100">
                        <div class="flex-1 min-w-0 pr-2">
                            <p class="font-semibold text-sm truncate">${productName}</p>
                            <p class="text-xs text-gray-500">${isEnquiryPrice ? '' : `HK$${item.price.toFixed(2)} x `}${qty} ${T('quantity')}</p>
                        </div>
                        <div class="flex items-center space-x-2">
                            ${priceText}
                            <button onclick="removeFromCart('${itemId}')" class="text-red-500 hover:text-red-700 text-sm">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" /></svg>
                            </button>
                        </div>
                    </div>
                `;
            }).join('');

            cartItemsContainer.innerHTML = cartHtml;
            totalCartonsEl.textContent = totalCartons;
            totalAmountEl.textContent = `HK$${totalAmount.toFixed(2)}`;
            
            // è¨‚å–®æäº¤é‚è¼¯ï¼šåªè¦æœ‰å®¢æˆ¶è³‡æ–™å’Œè²¨å“ï¼Œå³å…è¨±æäº¤
            const disableSubmission = (totalCartons === 0) || !isCustomerSetup;
            
            // é¡¯ç¤º/éš±è—æäº¤æŒ‰éˆ•å’Œå¾ŒçºŒæ“ä½œå®¹å™¨
            if (placeOrderBtn.hasAttribute('data-order-submitted')) {
                placeOrderBtn.classList.add('hidden');
                orderActionsContainer.classList.remove('hidden'); // Show WhatsApp/IIF buttons
                lastOrderID ? document.getElementById('order-qr-data').textContent = `${T('orderID')}: ${lastOrderID}` : '';
            } else {
                placeOrderBtn.classList.remove('hidden');
                orderActionsContainer.classList.add('hidden'); // Hide WhatsApp/IIF buttons
            }
            
            placeOrderBtn.disabled = disableSubmission;
            
            // é¡¯ç¤º/éš±è—å®¢æˆ¶è³‡æ–™è­¦å‘Š
            const customerWarning = document.getElementById('customer-info-warning');
            if (!isCustomerSetup && totalCartons > 0) {
                 customerWarning.classList.remove('hidden');
                 customerWarning.textContent = T('fillCustomerInfo');
            } else {
                 customerWarning.classList.add('hidden');
            }

            // é¡¯ç¤ºéœ€è¦ç¢ºèªçš„è­¦å‘Š (é‡å°ç„¡åº«å­˜æˆ–æŸ¥è©¢åƒ¹æ ¼çš„ç”¢å“)
            const enquiryWarning = document.getElementById('enquiry-warning');
            if (containsEnquiryItemOrZeroStock && !placeOrderBtn.hasAttribute('data-order-submitted')) {
                enquiryWarning.classList.remove('hidden');
                enquiryWarning.textContent = T('enquiryWarningSubmit');
            } else {
                enquiryWarning.classList.add('hidden');
            }
        }

        // --- INTERACTION HANDLERS ---

        function toggleCustomerModal() {
            // æ¯æ¬¡æ‰“é–‹/é—œé–‰æ¨¡æ…‹æ¡†æ™‚ï¼Œå¦‚æœæœªç™»å…¥ï¼Œå¼·åˆ¶è¦æ±‚ç™»å…¥
            if (!window.isLoggedIn) {
                 document.getElementById('password-modal').classList.remove('hidden');
                 return;
            }
            document.getElementById('customer-modal').classList.toggle('hidden');
        }

        function toggleCart() {
            // åœ¨æ¯æ¬¡å˜—è©¦æ‰“é–‹/é—œé–‰è³¼ç‰©è»Šæ™‚ï¼Œå¼·åˆ¶è¦æ±‚ç™»å…¥
            if (!window.isLoggedIn) {
                document.getElementById('password-modal').classList.remove('hidden');
                return;
            }
            
            isCartOpen = !isCartOpen;
            const cartPanel = document.getElementById('cart-panel');
            cartPanel.classList.toggle('translate-x-full', !isCartOpen);
            
            // æ¯æ¬¡æ‰“é–‹è³¼ç‰©è»Šæ™‚ï¼Œé‡ç½®è¨‚å–®ç‹€æ…‹
            const placeOrderBtn = document.getElementById('place-order-btn');
            placeOrderBtn.removeAttribute('data-order-submitted');
            lastOrderID = null;
            
            renderCart();
        }

        function handleAddToCart(event, productId, maxStock) {
             if (!window.isLoggedIn) {
                window.showModal("è«‹å…ˆç™»å…¥æ‰èƒ½ä¸‹å–®ã€‚", 'error');
                // é¡¯ç¤ºå¯†ç¢¼æ¨¡æ…‹æ¡†
                document.getElementById('password-modal').classList.remove('hidden');
                return;
            }
            
            event.preventDefault();
            const qtyInput = document.getElementById(`qty-${productId}`);
            const qty = parseInt(qtyInput.value, 10);
            const product = window.PRODUCTS.find(p => p.id === productId);
            const isEnquiryPrice = product.price === 9999.00;


            if (isNaN(qty) || qty <= 0) {
                showModal(T('qtyMustBePositive'));
                return;
            }
            
            // ç”±æ–¼å…è¨±ç„¡åº«å­˜ä¸‹å–®ï¼Œæ­¤è™•åƒ…ä½œæç¤ºï¼Œä¸é˜»æ­¢
            if (!isEnquiryPrice && maxStock < qty) {
                 showModal(`æ‚¨è¨‚è³¼çš„æ•¸é‡ (${qty}) é«˜æ–¼ç›®å‰åº«å­˜ (${maxStock})ã€‚è¨‚å–®å°‡è¢«è¨˜éŒ„ï¼Œä½†è«‹ç•™æ„å¯¦éš›å‡ºè²¨é‡ã€‚`, 'info');
            }
            
            // å…è¨±å°‡éœ€æŸ¥è©¢å ±åƒ¹çš„ç”¢å“åŠ å…¥è³¼ç‰©è»Š
            if (isEnquiryPrice && qty > 1) {
                 showModal(`ã€Œ${product.cn}ã€éœ€æŸ¥è©¢å ±åƒ¹ã€‚è«‹ä»¥ç®±ç‚ºå–®ä½ä¸‹å–®ï¼Œæ•¸é‡å°‡è¨˜éŒ„ç‚º ${qty} ç®±ã€‚`, 'info');
            }


            // Add or update cart
            cart[productId] = (cart[productId] || 0) + qty;
            
            // Show confirmation
            showModal(`${qty} ${T('quantity')} [${product.cn}] ${T('addToCart')}!`, 'success');
            
            // Reset input and update UI
            qtyInput.value = 1;
            renderCart();
            updateCartButtonCount();
            
            // é‡ç½®è¨‚å–®ç‹€æ…‹
            document.getElementById('place-order-btn').removeAttribute('data-order-submitted');
        }

        function removeFromCart(productId) {
            delete cart[productId];
            
            // é‡ç½®è¨‚å–®ç‹€æ…‹
            document.getElementById('place-order-btn').removeAttribute('data-order-submitted');
            lastOrderID = null;
            
            renderCart();
            updateCartButtonCount();
        }

        function updateCartButtonCount() {
            const count = Object.values(cart).reduce((sum, qty) => sum + qty, 0);
            document.getElementById('cart-count').textContent = count;
        }
        
        // ** IIF File Generation Logic **
        function generateIIFContent(orderId) {
            const customer = window.customerData;
            // IMPORTANT: Quickbooks IIF requires M/D/Y format.
            const today = new Date().toLocaleDateString('en-US', { month: '2-digit', day: '2-digit', year: 'numeric' });
            
            let iifContent = `!TRNS\tTRNSID\tTRNSTYPE\tDATE\tACCNT\tNAME\tAMOUNT\tDOCNUM\tMEMO\tSHIPTOADDRESS\n`;
            iifContent += `!SPL\tSPLID\tTRNSTYPE\tDATE\tACCNT\tNAME\tAMOUNT\tDOCNUM\tMEMO\tITEM\tQTY\tRATE\tPRICE\n`;
            iifContent += `!ENDTRNS\n`;

            let totalAmount = 0;
            let itemLines = '';
            
            // 1. Generate SPL lines for each item 
            Object.keys(cart).forEach((itemId, index) => {
                const item = window.PRODUCTS.find(p => p.id === itemId);
                const qty = cart[itemId];
                
                // If price needs enquiry, use 0.01 as placeholder to avoid QB error, and note in MEMO.
                const price = item.price === 9999.00 ? 0.01 : item.price;
                const lineTotal = price * qty;
                totalAmount += lineTotal;
                
                let memo = item.cn + " (" + item.details + ")";
                if (item.price === 9999.00) {
                    memo += " - PRICE PENDING CONFIRMATION";
                }
                
                // Account for Sales: 'Sales' (Must match your QB Chart of Accounts)
                itemLines += `SPL\t\tINVOICE\t${today}\tSales\t${customer.customerID}\t${lineTotal.toFixed(2)}\t${orderId}\t${memo}\t${item.id}\t${qty}\t${price.toFixed(2)}\t${lineTotal.toFixed(2)}\n`;
            });
            
            // 2. Generate TRNS line (Invoice Header)
            // Assuming "Accounts Receivable" as the account for the invoice total
            const formattedAddress = customer.address.replace(/\n/g, ' '); // IIF requires single line for address field
            const orderNotes = document.getElementById('order-notes').value.trim();
            
            let transactionMemo = `Wholesale Order for ${customer.name}`;
            if (orderNotes) {
                transactionMemo += ` | Note: ${orderNotes}`;
            }

            iifContent += `TRNS\t\tINVOICE\t${today}\tAccounts Receivable\t${customer.customerID}\t${totalAmount.toFixed(2)}\t${orderId}\t${transactionMemo}\t${formattedAddress}\n`;
            
            // 3. Append item SPL lines
            iifContent += itemLines;
            
            // 4. Generate final TRNS closing SPL line for A/R balance
            // This line balances the transaction against A/R
            iifContent += `SPL\t\tINVOICE\t${today}\tAccounts Receivable\t${customer.customerID}\t${(-totalAmount).toFixed(2)}\t${orderId}\tInvoice Total Balance\n`;
            
            iifContent += `ENDTRNS\n`;

            return iifContent;
        }

        function downloadIIF() {
            if (!lastOrderID) {
                showModal("è«‹å…ˆæäº¤è¨‚å–®ã€‚ (Please submit the order first.)", 'error');
                return;
            }
            
            const iifContent = generateIIFContent(lastOrderID);
            const blob = new Blob([iifContent], { type: 'text/plain;charset=utf-8' });
            
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = `NICEONE_ORDER_${lastOrderID}_${window.customerData.customerID}.iif`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            
            showModal("IIF æ–‡ä»¶å·²ä¸‹è¼‰ï¼è«‹å°å…¥ Quickbooks Desktopã€‚", 'info');
        }

        // ** WhatsApp Message and QR Code Logic **
        function sendOrderViaWhatsApp() {
            if (!lastOrderID) {
                 showModal("è«‹å…ˆæäº¤è¨‚å–®ã€‚ (Please submit the order first.)", 'error');
                return;
            }
            
            // 1. æ•´ç†è¨‚å–®è©³æƒ…
            const orderDetails = Object.keys(cart).map(itemId => {
                const item = window.PRODUCTS.find(p => p.id === itemId);
                const qty = cart[itemId];
                const productName = item[currentLang];
                
                const isEnquiry = item.price === 9999.00;
                const priceText = isEnquiry ? T('perEnquiry') : `HK$${item.price.toFixed(2)}`;
                
                // æ ¼å¼: ç”¢å“åç¨± (è¦æ ¼) - åƒ¹æ ¼ x æ•¸é‡
                return `${productName} (${item.details}) - ${priceText} x ${qty} ç®±`;
            }).join('\n');
            
            const totalCartons = Object.values(cart).reduce((sum, qty) => sum + qty, 0);
            let totalAmount = 0;
            Object.keys(cart).forEach(itemId => {
                const item = window.PRODUCTS.find(p => p.id === itemId);
                if (item.price !== 9999.00) {
                    totalAmount += item.price * cart[itemId];
                }
            });
            
            const messageTitle = T('whatsappMessageTitle');
            const totalAmountText = T('whatsappMessageSubtotal');
            const totalCartonsText = T('whatsappMessageTotalCartons');
            const note = T('whatsappMessageNote');
            
            const qrCodeContent = `NICEONE_ORDER_${lastOrderID}`;
            const orderNotes = document.getElementById('order-notes').value.trim();
            const noteLine = orderNotes ? `å…§éƒ¨å‚™è¨»: ${orderNotes}\n` : '';

            const whatsappMessage = 
                `${messageTitle}\n` +
                `============================\n` +
                `å®¢æˆ¶åç¨±: ${window.customerData.name}\n` +
                `å®¢æˆ¶ç·¨è™Ÿ: ${window.customerData.customerID}\n` +
                `è¯ç¹«é›»è©±: ${window.customerData.phone}\n` +
                `é€è²¨åœ°å€: ${window.customerData.address}\n` +
                `${T('orderID')}: ${lastOrderID}\n` +
                `\n` +
                `è¨‚å–®è©³æƒ… (Order Details):\n` +
                `${orderDetails}\n` +
                `\n` +
                `============================\n` +
                `${totalCartonsText}: ${totalCartons} ç®±\n` +
                `${totalAmountText}: HK$${totalAmount.toFixed(2)} (ä¸åŒ…å«éœ€æŸ¥è©¢å ±åƒ¹è²¨å“)\n` +
                `============================\n` +
                noteLine +
                `${note}\n` +
                `å€‰åº«è²¼ç´™äºŒç¶­ç¢¼å…§å®¹:\n${qrCodeContent}`; // Mention the QR code content clearly

            // 2. ç·¨ç¢¼è¨Šæ¯
            const encodedMessage = encodeURIComponent(whatsappMessage);

            // 3. æ§‹é€  WhatsApp é€£çµ (ä½¿ç”¨ 852 å€è™Ÿ)
            const whatsappLink = `https://wa.me/852${WHATSAPP_NUMBER}?text=${encodedMessage}`;
            
            // 4. æ‰“é–‹é€£çµ
            window.open(whatsappLink, '_blank');
        }

        // ** Main Order Submission **
        function placeOrder() {
            if (Object.keys(cart).length === 0) {
                showModal(T('emptyCart'));
                return;
            }
            
            // æœ€çµ‚æª¢æŸ¥å®¢æˆ¶è³‡æ–™æ˜¯å¦å¡«å¯«
            if (window.customerData.customerID === "GUEST001" || !window.customerData.name || window.customerData.address === "N/A") {
                 showModal(T('fillCustomerInfo'), 'error');
                 return;
            }
            
            // SIMULATION: Generate unique Order ID
            const orderId = `SO-${Date.now()}`;
            lastOrderID = orderId;
            
            // SIMULATION: Quickbooks API Call & Stock Reduction
            Object.entries(cart).forEach(([id, qty]) => {
                const currentStock = MOCK_INVENTORY_SYSTEM.get(id);
                if (currentStock !== undefined) {
                    MOCK_INVENTORY_SYSTEM.set(id, Math.max(0, currentStock - qty));
                }
            });
            
            // æ¨¡æ“¬ Quickbooks æäº¤æˆåŠŸå¾Œï¼Œå°‡æŒ‰éˆ•åˆ‡æ›ç‚ºå¾ŒçºŒæ“ä½œ
            const placeOrderBtn = document.getElementById('place-order-btn');
            placeOrderBtn.setAttribute('data-order-submitted', 'true');
            
            renderCart(); // åˆ·æ–°ä»¥é¡¯ç¤ºå¾ŒçºŒæ“ä½œæŒ‰éˆ•

            // Show success modal with QR code generation
            showSuccessModalWithQR(orderId);
        }
        
        // Function to show QR code after successful submission
        function showSuccessModalWithQR(orderId) {
            const modal = document.getElementById('custom-modal-qr');
            const modalMessage = document.getElementById('modal-message-qr');
            
            modalMessage.innerHTML = `${T('orderSuccess')} <br> ${T('orderID')}: <span class="font-mono text-blue-600">${orderId}</span>`;

            // Clear previous QR code and generate new one
            const qrCodeContainer = document.getElementById('qrcode-container');
            qrCodeContainer.innerHTML = '';
            
            // Generate QR Code with Order ID (NICEONE_ORDER_XXX) for warehouse stickering
            new QRCode(qrCodeContainer, {
                text: `NICEONE_ORDER_${orderId}`,
                width: 128,
                height: 128,
                colorDark : "#000000",
                colorLight : "#ffffff",
                correctLevel : QRCode.CorrectLevel.H
            });
            
            modal.classList.remove('hidden');
        }
        
        // --- MODAL/MESSAGE BOX UTILITY (Replaces alert()) ---

        function showModal(message, type = 'info') {
            const modal = document.getElementById('custom-modal');
            const modalMessage = document.getElementById('modal-message');
            const modalHeader = document.getElementById('modal-header');
            const colorMap = {
                'info': { bg: 'bg-blue-500', icon: 'i-info' },
                'success': { bg: 'bg-green-500', icon: 'i-check' },
                'error': { bg: 'bg-red-500', icon: 'i-error' }
            };
            
            const { bg } = colorMap[type];
            modalHeader.className = `p-4 text-white rounded-t-lg flex items-center justify-between ${bg}`;
            modalMessage.textContent = message;
            modal.classList.remove('hidden');

            // Auto-hide after 3 seconds
            setTimeout(() => {
                modal.classList.add('hidden');
            }, 3000);
        }
        
        // --- INITIALIZATION ---

        window.onload = function() {
            // Check for authentication first
            if (!window.isLoggedIn) {
                 document.getElementById('password-modal').classList.remove('hidden');
            } else {
                 document.body.classList.add('authenticated');
            }
            
            // Load language preference
            const savedLang = localStorage.getItem('lang');
            if (savedLang) {
                currentLang = savedLang;
            }

            // Initialize mock inventory for ALL new products (100 cartons of everything)
            window.PRODUCTS.forEach(p => {
                if (p.price !== 9999.00) { // Only track inventory for items with set price
                    MOCK_INVENTORY_SYSTEM.set(p.id, 100);
                } else {
                    MOCK_INVENTORY_SYSTEM.set(p.id, -1); // Use -1 to denote non-tradable/enquiry items
                }
            });

            // Set up Categories in the navigation bar
            const navContainer = document.getElementById('category-nav-links');
            navContainer.innerHTML = Object.entries(CATEGORIES).map(([key, data]) => `
                <a href="#${key}" id="cat-btn-${key}" onclick="renderProducts('${key}')"
                   class="category-btn px-4 py-2 text-sm font-medium rounded-full transition duration-150 ease-in-out whitespace-nowrap bg-gray-100 text-gray-800 hover:bg-blue-500 hover:text-white">
                    ${data.icon} <span data-lang-key="${key}">${data[currentLang]}</span>
                </a>
            `).join('');

            updateUILanguage();
            renderProducts('HOT_ITEMS'); // Initial load: Hot Items
            loadCustomerData(); // Load local customer data
            window.setupCustomerForm(); // Setup customer form after global T is available
        };

        // Expose critical functions globally
        window.sendOrderViaWhatsApp = sendOrderViaWhatsApp;
        window.placeOrder = placeOrder;
        window.downloadIIF = downloadIIF;
        window.showModal = showModal;
        window.renderCart = renderCart; // Expose renderCart
        window.toggleCustomerModal = toggleCustomerModal;
        window.setupCustomerForm = setupCustomerForm;
        window.verifyPassword = verifyPassword;
        window.saveCustomerData = saveCustomerData;
        window.generateOrderNote = generateOrderNote; // Expose LLM function

    </script>
    
    <!-- Access Control (PASSWORD Modal) -->
    <div id="password-modal" class="fixed inset-0 bg-gray-900 bg-opacity-90 z-[1001] flex items-center justify-center hidden">
        <div class="bg-white rounded-xl shadow-2xl max-w-sm w-full m-4 p-6 space-y-6">
            <h3 class="text-2xl font-bold text-center text-blue-700" data-lang-key="passwordTitle">å­˜å–å¯†ç¢¼é©—è­‰</h3>
            <p class="text-sm text-gray-600 text-center" data-lang-key="passwordDesc">è«‹è¼¸å…¥å­˜å–å¯†ç¢¼ä»¥é€²å…¥ç³»çµ±ã€‚</p>
            
            <!-- Password Verification Form -->
            <form onsubmit="verifyPassword(event)" class="space-y-4 pt-4 border-t border-gray-100">
                <div>
                    <label for="password-input" class="block text-sm font-medium text-gray-700 mb-1">è¼¸å…¥ Access Code (å¯†ç¢¼)</label>
                    <input type="password" id="password-input" required
                        class="w-full p-3 border-2 border-gray-300 rounded-lg text-center text-xl tracking-widest focus:border-blue-500 focus:ring-blue-500">
                </div>
                <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg shadow-md">
                    <span data-lang-key="passwordVerify">é©—è­‰å¯†ç¢¼ä¸¦ç™»å…¥</span>
                </button>
                <p class="text-xs text-center text-gray-400">å›ºå®šå¯†ç¢¼: 5Xi2G5e_v#VX!YH</p>
            </form>
        </div>
    </div>

    <!-- Modal Placeholder for simple messages -->
    <div id="custom-modal" class="fixed inset-0 bg-gray-900 bg-opacity-50 hidden z-[1000] flex items-start justify-center pt-20">
        <div class="bg-white rounded-lg shadow-2xl max-w-sm w-full transform transition-all duration-300 scale-100">
            <div id="modal-header" class="p-4 text-white rounded-t-lg flex items-center justify-between bg-blue-500">
                <span class="font-bold text-lg">æç¤º (Notice)</span>
                <button onclick="document.getElementById('custom-modal').classList.add('hidden')" class="text-white hover:text-gray-200">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>
            <div class="p-6">
                <p id="modal-message" class="text-gray-700"></p>
                <div class="mt-4 flex justify-end">
                    <button onclick="document.getElementById('custom-modal').classList.add('hidden')" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300">
                        ç¢ºå®š (OK)
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal Placeholder for Order Success/QR Code -->
    <div id="custom-modal-qr" class="fixed inset-0 bg-gray-900 bg-opacity-50 hidden z-[1000] flex items-start justify-center pt-20">
        <div class="bg-white rounded-lg shadow-2xl max-w-lg w-full transform transition-all duration-300 scale-100">
            <div class="p-4 bg-green-500 text-white rounded-t-lg flex items-center justify-between">
                <span class="font-bold text-lg">âœ… è¨‚å–®å·²è™•ç†æˆåŠŸ (Order Processed)</span>
                <button onclick="document.getElementById('custom-modal-qr').classList.add('hidden'); cart = {}; updateCartButtonCount(); renderCart();" class="text-white hover:text-gray-200">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>
            <div class="p-6 text-center">
                <p id="modal-message-qr" class="text-gray-700 text-lg mb-4 font-semibold"></p>
                
                <p class="text-sm text-gray-500 mb-2">å€‰åº«æƒæè²¼ç´™ (Warehouse Sticker QR Code)</p>
                <div id="qrcode-container" class="mx-auto w-32 h-32 border-4 border-gray-200 rounded-lg mb-4">
                    <!-- QR Code will be drawn here -->
                </div>

                <div class="flex flex-col space-y-2">
                    <button onclick="downloadIIF(); document.getElementById('custom-modal-qr').classList.add('hidden');" 
                        class="w-full bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-3 rounded-lg transition duration-150 shadow-md">
                        <span data-lang-key="downloadIIF">ä¸‹è¼‰ IIF æ–‡ä»¶ (Quickbooks)</span>
                    </button>
                    <button onclick="sendOrderViaWhatsApp(); document.getElementById('custom-modal-qr').classList.add('hidden');"
                        class="w-full bg-whatsapp hover:bg-whatsapp-dark text-white font-bold py-3 rounded-lg transition duration-150 shadow-md">
                        <span data-lang-key="sendOrder">ç™¼é€è¨‚å–®è‡³ WhatsApp (å«QR)</span>
                    </button>
                </div>
                <p class="mt-4 text-xs text-gray-400">è«‹å®Œæˆä»¥ä¸Šæ“ä½œå¾Œï¼Œé‡æ–°é–‹å•Ÿè³¼ç‰©è»Šä»¥æ¸…ç©ºè¨‚å–®ã€‚</p>
            </div>
        </div>
    </div>
    
    <!-- Modal Placeholder for Customer Info Input -->
    <div id="customer-modal" class="fixed inset-0 bg-gray-900 bg-opacity-50 hidden z-[1000] flex items-center justify-center">
        <div class="bg-white rounded-xl shadow-2xl max-w-md w-full m-4 transform transition-all duration-300">
            <div class="p-4 bg-blue-600 text-white rounded-t-xl flex justify-between items-center">
                <h3 class="text-xl font-bold" data-lang-key="customerInfo">å®¢æˆ¶è³‡æ–™è¨­å®š (å¿…å¡«)</h3>
                <button onclick="toggleCustomerModal()" class="p-1 rounded-full hover:bg-blue-700 transition">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>

            <form id="customer-form" class="p-6 space-y-4">
                <div class="space-y-1 relative">
                    <label for="customer-name" class="block text-sm font-medium text-gray-700" data-lang-key="customerName">å®¢æˆ¶åç¨±</label>
                    <input type="text" id="customer-name" name="customer-name" required 
                        placeholder="æ†ç«‹æœ‰é™å…¬å¸"
                        class="w-full p-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500">
                </div>
                 <div class="space-y-1">
                    <label for="customer-id" class="block text-sm font-medium text-gray-700" data-lang-key="customerID">å®¢æˆ¶ç·¨è™Ÿ (Quickbooks/ERP ID)</label>
                    <input type="text" id="customer-id" name="customer-id" required
                        placeholder="CUST-001"
                        class="w-full p-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500">
                </div>
                <div class="space-y-1">
                    <label for="customer-phone" class="block text-sm font-medium text-gray-700" data-lang-key="customerPhone">è¯ç¹«é›»è©±</label>
                    <input type="tel" id="customer-phone" name="customer-phone" required
                        placeholder="65752256"
                        class="w-full p-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500">
                </div>
                <div class="space-y-1">
                    <label for="customer-address" class="block text-sm font-medium text-gray-700" data-lang-key="customerAddress">é€è²¨åœ°å€</label>
                    <textarea id="customer-address" name="customer-address" rows="3" required
                        placeholder="é¦™æ¸¯èƒç£æ™¯åœ–è¡—1è™Ÿåˆ©å·¥æ¥­ä¸­å¿ƒ4AC"
                        class="w-full p-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"></textarea>
                </div>
                
                <!-- Gemini LLM Feature: Note Suggestion -->
                <div class="space-y-1 pt-4 border-t border-gray-100">
                    <label for="order-notes" class="block text-sm font-medium text-gray-700">é¡å¤–è¨‚å–®å‚™è¨» (Optional)</label>
                    <div class="flex space-x-2">
                         <button type="button" onclick="generateOrderNote()" 
                            class="flex-shrink-0 flex items-center justify-center bg-purple-500 hover:bg-purple-600 text-white text-xs font-bold py-2 px-3 rounded-lg transition duration-150 shadow-md">
                            <span data-lang-key="generateNote">âœ¨ ç”Ÿæˆå‚™è¨»å»ºè­°</span>
                        </button>
                        <input type="text" id="order-notes" name="order-notes" maxlength="100"
                            placeholder="è«‹æŒ‰ã€Œç”Ÿæˆå»ºè­°ã€æˆ–æ‰‹å‹•è¼¸å…¥..." data-lang-key="notePlaceholder"
                            class="w-full p-2 border border-gray-300 rounded-lg text-sm focus:ring-blue-500 focus:border-blue-500">
                    </div>
                    
                </div>
                
                <div class="flex justify-end pt-2">
                    <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg shadow-md" data-lang-key="customerSave">
                        å„²å­˜å®¢æˆ¶è³‡æ–™
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- MAIN CONTENT AREA -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Quickbooks Simulation Notice -->
        <div class="mb-6 p-4 bg-yellow-100 border border-yellow-300 text-yellow-800 rounded-lg text-sm">
            <p class="font-bold inline" data-lang-key="aboutQBLayer"></p>
            <span class="font-medium text-xs">(å¯¦éš›éƒ¨ç½²éœ€é€£æ¥ QuickBook API)</span>
        </div>

        <!-- Product List -->
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-2xl font-bold text-gray-700" data-lang-key="categoryFilter">ç”¢å“åˆ†é¡</h2>
        </div>
        
        <div id="product-list" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
            <!-- Products will be rendered here by JS -->
        </div>

    </main>

    <!-- FLOATING CART PANEL -->
    <div id="cart-panel" class="fixed top-0 right-0 w-full md:w-96 h-full bg-white shadow-2xl transform translate-x-full transition-transform duration-300 ease-in-out z-40 flex flex-col">
        <!-- Cart Header -->
        <div class="p-4 bg-blue-600 text-white flex justify-between items-center shadow-md">
            <h3 class="text-xl font-bold" data-lang-key="cartTitle">å®¢æˆ¶è¨‚å–® (ç®±)</h3>
            <button onclick="toggleCart()" class="p-1 rounded-full hover:bg-blue-700 transition">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>
        </div>
        
        <!-- Customer Info Warning -->
        <p id="customer-info-warning" class="text-sm p-3 bg-red-100 text-red-700 hidden"></p>

        <!-- Enquiry/Stock Warning -->
        <p id="enquiry-warning" class="text-sm p-3 bg-yellow-100 text-yellow-800 hidden"></p>

        <!-- Cart Items -->
        <div id="cart-items" class="flex-grow overflow-y-auto divide-y divide-gray-100">
            <!-- Cart items rendered here by JS -->
        </div>

        <!-- Cart Footer / Summary -->
        <div class="p-4 border-t border-gray-200 bg-gray-50 sticky bottom-0">
            <div class="space-y-2 mb-4">
                <div class="flex justify-between font-medium text-gray-700">
                    <span data-lang-key="totalItems">ç¸½è¨‚è³¼ç®±æ•¸</span>:
                    <span id="total-cartons" class="font-bold">0</span>
                </div>
                <div class="flex justify-between text-xl font-bold text-blue-700">
                    <span data-lang-key="totalAmount">é è¨ˆç¸½é‡‘é¡</span>:
                    <span id="total-amount">HK$0.00</span>
                </div>
            </div>
            
            <!-- æäº¤è¨‚å–®æŒ‰éˆ• (æ¨¡æ“¬ Quickbooks æäº¤) -->
            <button id="place-order-btn" onclick="placeOrder()" disabled
                class="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 rounded-lg transition duration-150 shadow-md disabled:opacity-50 disabled:cursor-not-allowed">
                <span data-lang-key="placeOrder">ç¢ºèªä¸¦æäº¤è¨‚å–® (ERPæ¨¡æ“¬)</span>
            </button>

            <!-- å¾ŒçºŒæ“ä½œå®¹å™¨ (æˆåŠŸæäº¤ Quickbooks å¾Œé¡¯ç¤º) -->
            <div id="order-actions" class="hidden space-y-2">
                <p id="order-qr-data" class="text-center text-sm font-semibold text-gray-600 mb-2"></p>
                <button onclick="downloadIIF()"
                    class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 rounded-lg transition duration-150 shadow-md">
                    <span data-lang-key="downloadIIF">ä¸‹è¼‰ IIF æ–‡ä»¶ (Quickbooks)</span>
                </button>
                 <button onclick="sendOrderViaWhatsApp()"
                    class="w-full bg-whatsapp hover:bg-whatsapp-dark text-white font-bold py-3 rounded-lg transition duration-150 shadow-md">
                    <span data-lang-key="sendOrder">ç™¼é€è¨‚å–®è‡³ WhatsApp (å«QR)</span>
                </button>
            </div>
        </div>
    </div>
    
    <style>
        .bg-whatsapp { background-color: #25d366; }
        .hover:bg-whatsapp-dark:hover { background-color: #128c7e; }
    </style>
    
    <script>
    // --- AUTOSUGGEST LOGIC ---
    // ç”±æ–¼å®¢æˆ¶åå–®å·²ç§»é™¤ï¼Œæ­¤è™•çš„è‡ªå‹•è¯æƒ³é‚è¼¯å·²ä¸å†ç”Ÿæ•ˆï¼Œä½†ä¿ç•™æ¶æ§‹ã€‚

    // Function to handle input change and display suggestions
    function handleAutosuggest(query) {
        // Logically removed as per user request to use manual input only.
        const list = document.getElementById('autosuggest-list');
        list.classList.add('hidden');
        list.innerHTML = '';
        return;
    }
    
    // Function to handle selection from the autosuggest list
    function selectCustomer(customer) {
        // Logically removed as per user request to use manual input only.
        return;
    }
    
    // Hide autosuggest list when clicking outside
    document.addEventListener('click', (e) => {
        // Logically removed as per user request to use manual input only.
    });

    </script>

    <!-- HEADER & FIXED NAVIGATION -->
    <header class="sticky-nav bg-white shadow-lg">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3 flex justify-between items-center border-b">
            <div class="flex items-center space-x-4">
                <img src="https://placehold.co/40x40/3b82f6/ffffff?text=N1" alt="Nice One Logo" class="rounded-full">
                <div>
                    <h1 class="text-xl font-extrabold text-gray-900" data-lang-key="companyName">æ†ç«‹ï¼ˆé¦™æ¸¯)æœ‰é™å…¬å¸</h1>
                    <p class="text-sm text-gray-600" data-lang-key="orderingSystem">é›»å­è¨‚å–®ç³»çµ±</p>
                </div>
            </div>

            <div class="flex items-center space-x-4">
                <!-- Customer Info / Settings Button -->
                <button onclick="toggleCustomerModal(); window.setupCustomerForm();" class="flex items-center space-x-2 p-2 bg-gray-100 rounded-full hover:bg-gray-200 transition duration-150">
                     <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                     <div id="customer-info-display">
                         <!-- Customer Name/ID will be displayed here -->
                     </div>
                </button>
                
                <button id="lang-toggle" onclick="switchLanguage()" class="px-3 py-1 text-sm rounded-lg border border-gray-300 hover:bg-gray-100 transition duration-150">
                    English
                </button>
                <button onclick="toggleCart()" class="relative bg-indigo-600 hover:bg-indigo-700 text-white p-3 rounded-full shadow-lg transition duration-150">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>
                    <span id="cart-count" class="absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-red-100 transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full">0</span>
                </button>
            </div>
        </div>
        
        <!-- Category Filter Bar (Fixed Sticky under Header) -->
        <div class="w-full bg-gray-50 border-b border-gray-200 shadow-md">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3 overflow-x-auto">
                <div id="category-nav-links" class="flex space-x-3 pb-2">
                    <!-- Categories rendered here by JS -->
                </div>
            </div>
        </div>
    </header>
</body>
</html>
