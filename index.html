<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ†ç«‹æ‰¹ç™¼è¨‚å–®ç³»çµ± | Nice One Wholesale Ordering</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Use Inter font -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            color: #1f2937;
        }
        /* Custom scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
        
        .sticky-nav {
            position: sticky;
            top: 0;
            z-index: 40;
            backdrop-filter: blur(8px);
            background-color: rgba(255, 255, 255, 0.95);
        }
        .category-scroll {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
        .category-scroll::-webkit-scrollbar {
            display: none;
        }

        /* --- PRINT STYLES FOR LABELS --- */
        @media print {
            body * {
                visibility: hidden;
            }
            #print-area, #print-area * {
                visibility: visible;
            }
            #print-area {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
            }
            .label-card {
                break-after: page; /* Force page break after each label */
                page-break-after: always;
                width: 95%; /* Adjust for printer width */
                margin: 0 auto;
                border: 2px solid black;
                padding: 10px;
                display: flex;
                flex-direction: column;
                justify-content: center;
                text-align: center;
                height: 100vh; /* Use full height of the label/page */
                max-height: 90mm; /* Constraint for typical label height */
            }
            /* Hide non-print elements */
            .no-print {
                display: none !important;
            }
        }
    </style>
    <!-- QR Code Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>
<body>

    <!-- Gemini API Key -->
    <script>const apiKey = "";</script>

    <!-- App Logic -->
    <script>
        // --- CONSTANTS ---
        const WHATSAPP_NUMBER = "65752256";
        
        // --- STATE MANAGEMENT ---
        const state = {
            cart: {}, // { productId: quantity }
            customer: {
                name: "",
                id: "",
                phone: "",
                address: ""
            },
            currentCategory: 'HOT_ITEMS',
            lastOrderId: null,
            products: [] // Will be populated on init
        };

        const CATEGORIES = {
            HOT_ITEMS: { id: 'HOT_ITEMS', name: 'ğŸ”¥ ç†±é–€è²¨å“' },
            PERSONAL_CARE: { id: 'PERSONAL_CARE', name: 'ğŸ§¼ å€‹äººè­·ç† (é¦™çš‚/æ´—é«®)' },
            CANNED_MEAT: { id: 'CANNED_MEAT', name: 'ğŸ– ç½é ­è‚‰é¡ (åˆé¤è‚‰/äº”é¦™)' },
            INSTANT_MIXES: { id: 'INSTANT_MIXES', name: 'â˜• å³æº¶é£²å“ (å’–å•¡/å¥¶èŒ¶/ç¾ç¥¿)' },
            SNACKS: { id: 'SNACKS', name: 'ğŸª é›¶é£Ÿé¤…ä¹¾ & æœ±å¤åŠ›' },
            DAILY: { id: 'DAILY', name: 'ğŸ§´ æ—¥ç”¨å“ (æ´—è¡£/æ¸…æ½”)' },
            DRINKS_DAIRY: { id: 'DRINKS_DAIRY', name: 'ğŸ¥› é£²å“åŠå¥¶é¡ (æ·¡å¥¶/éº¥ç‰‡)' },
            SEASONING: { id: 'SEASONING', name: 'ğŸ§‚ èª¿å‘³åŠé›œé …' },
        };

        // --- RAW DATA IMPORT ---
        const rawData = [
            // 1 é¦™çš‚ Soap
            { cn: 'åŠ›å£«é¦™çš‚(æ··åˆ)', en: 'Lux Soap (Mixed)', cat: 'PERSONAL_CARE', spec: '80g x6s x24æ‰', price: 264, origin: 'å°å°¼' },
            { cn: 'åŠ›å£«é¦™çš‚(ç±³è‰²)', en: 'Lux Soap (Beige)', cat: 'PERSONAL_CARE', spec: '80g x6s x24æ‰', price: 270, origin: 'å°å°¼' },
            { cn: 'åŠ›å£«é¦™çš‚(ç´«è‰²)', en: 'Lux Soap (Purple)', cat: 'PERSONAL_CARE', spec: '80g x6s x24æ‰', price: 270, origin: 'å°å°¼' },
            { cn: 'åŠ›å£«é¦™çš‚(è—è‰²)', en: 'Lux Soap (Blue)', cat: 'PERSONAL_CARE', spec: '80g x6s x24æ‰', price: 270, origin: 'å°å°¼' },
            { cn: 'åŠ›å£«é¦™çš‚(ç²‰ç´…)', en: 'Lux Soap (Pink)', cat: 'PERSONAL_CARE', spec: '80g x6s x24æ‰', price: 270, origin: 'å°å°¼' },
            { cn: 'å¼·ç”Ÿé¦™çš‚', en: 'Johnsons Baby Soap', cat: 'PERSONAL_CARE', spec: '120g x4s x6æ‰', price: 162, origin: 'å°å°¼' },
            { cn: 'èŠ±ç‹é¦™çš‚', en: 'Kao White Soap', cat: 'PERSONAL_CARE', spec: '135g x3s x24æ‰', price: 288, origin: 'æ—¥æœ¬' },
            { cn: 'æ»´éœ²è–„è·é¦™çš‚', en: 'Dettol Cool Soap', cat: 'PERSONAL_CARE', spec: '105g x4s x36æ‰', price: 414, origin: 'å°å°¼' },
            { cn: 'æ»´éœ²è–„è·é¦™çš‚(100g)', en: 'Dettol Cool Soap (100g)', cat: 'PERSONAL_CARE', spec: '100g x6s x24æ‰', price: 414, origin: 'å°å°¼' },
            { cn: 'æ»´éœ²è–„è·é¦™çš‚(æ·ºè—)', en: 'Dettol Cool Soap (Light Blue)', cat: 'PERSONAL_CARE', spec: '100g x6s x24æ‰', price: 414, origin: 'å°å°¼' },
            { cn: 'æ»´éœ²èˆ’è†šé¦™çš‚(ç²‰ç´…)', en: 'Dettol Soap (Pink)', cat: 'PERSONAL_CARE', spec: '100g x6s x24æ‰', price: 414, origin: 'å°å°¼' },
            { cn: 'æ»´éœ²æ¸…æ–°é¦™çš‚(é»ƒè‰²)', en: 'Dettol Soap (Yellow)', cat: 'PERSONAL_CARE', spec: '105g x6s x24æ‰', price: 414, origin: 'å°å°¼' },
            { cn: 'æ»´éœ²è˜†è–ˆç‰›æ²¹æœé¦™çš‚', en: 'Dettol Soap (Aloe)', cat: 'PERSONAL_CARE', spec: '100g x6s x24æ‰', price: 414, origin: 'å°å°¼' },
            { cn: 'æ»´éœ²è–°è¡£è‰é¦™çš‚', en: 'Dettol Soap (Lavender)', cat: 'PERSONAL_CARE', spec: '100g x6s x24æ‰', price: 414, origin: 'å°å°¼' },
            { cn: 'æ»´éœ²é¦™æ©™å‘³é¦™çš‚', en: 'Dettol Soap (Orange)', cat: 'PERSONAL_CARE', spec: '100g x6s x24æ‰', price: 414, origin: 'å°å°¼' },
            { cn: 'æ»´éœ²èœœç“œå‘³é¦™çš‚', en: 'Dettol Soap (Melon)', cat: 'PERSONAL_CARE', spec: '100g x6s x24æ‰', price: 414, origin: 'å°å°¼' },
            { cn: 'æ»´éœ²åŸå‘³é¦™çš‚', en: 'Dettol Soap (Original)', cat: 'PERSONAL_CARE', spec: '100g x4s x36æ‰', price: 414, origin: 'å°å°¼' },
            
            // 2 é¦™çš‚
            { cn: 'å¤šèŠ¬é¦™çš‚ (åŸå‘³)', en: 'Dove Soap (Original)', cat: 'PERSONAL_CARE', spec: '90g x6s x8æ‰', price: 200, origin: 'å°å°¼' },
            { cn: 'æ£•æ¬–ç«ç‘°ç‰›ä¹³é¦™çš‚', en: 'Palmolive Soap (Rose)', cat: 'PERSONAL_CARE', spec: '80g x3s x24æ‰', price: 216, origin: 'æ³°åœ‹' },
            { cn: 'æ£•æ¬–è˜†è–ˆæ©„æ¬–é¦™çš‚', en: 'Palmolive Soap (Aloe)', cat: 'PERSONAL_CARE', spec: '80g x3s x24æ‰', price: 216, origin: 'æ³°åœ‹' },
            { cn: 'æ£•æ¬–å«©ç™½çç é¦™çš‚', en: 'Palmolive Soap (Pearl)', cat: 'PERSONAL_CARE', spec: '80g x3s x24æ‰', price: 216, origin: 'æ³°åœ‹' },
            { cn: 'æ£•æ¬–é¦™çš‚(å¤§)', en: 'Palmolive Soap (L)', cat: 'PERSONAL_CARE', spec: '100g x3s x16æ‰', price: 160, origin: 'æ³°åœ‹' },
            { cn: 'åŠ ä¿¡æ°é¦™çš‚', en: 'Cussons Soap', cat: 'PERSONAL_CARE', spec: '115g x4s x18', price: 198, origin: 'å°å°¼' },

            // é£Ÿå“ Snacks
            { cn: 'æ´½æ´½é¦™ç“œå­', en: 'ChaCha Sunflower Seeds', cat: 'SNACKS', spec: '260g x 20åŒ…', price: 220, origin: 'ä¸­åœ‹' },
            { cn: 'éº¥ç¶­ä»–æ¶ˆåŒ–é¤…', en: 'McVities Digestive', cat: 'SNACKS', spec: '400g x 2æ¢ x 9åŒ…', price: 153, origin: 'è¥¿ç­ç‰™' },
            { cn: 'MIXX ç‰›è‚‰å‘³è˜‡æ‰“é¤…', en: 'MIXX Crackers Beef', cat: 'SNACKS', spec: '280g x 16', price: 176, origin: 'ä¸­åœ‹' },
            { cn: 'å¥§åˆ©å¥§å¤¾å¿ƒé¤…å¹²(æ··åˆ)', en: 'Oreo (Mixed)', cat: 'SNACKS', spec: '28.5g x 12åŒ…', price: 124, origin: 'å°å°¼' },
            { cn: 'é»ƒæ²¹å‘³è›‹å·', en: 'Eggrolls (Butter)', cat: 'SNACKS', spec: '208g x 16', price: 176, origin: 'ä¸­åœ‹' },
            { cn: 'åˆ©è„†èŠå£«å¤¾å¿ƒé¤…', en: 'Ritz Cheese', cat: 'SNACKS', spec: '27g x 9æ¢ x 12åŒ…', price: 138, origin: 'å°å°¼' },
            { cn: 'åŸå‘³è›‹å·', en: 'Eggrolls (Original)', cat: 'SNACKS', spec: '208g x 16', price: 176, origin: 'ä¸­åœ‹' },
            { cn: 'åˆ©è„†çƒ˜çƒ¤è„†ç‰‡', en: 'Ritz Toasted Chips', cat: 'SNACKS', spec: '6 x 229g', price: 120, origin: 'è¶Šå—' },
            { cn: 'é»‘æ¾éœ²è˜‡æ‰“é¤…', en: 'Truffle Soda Crackers', cat: 'SNACKS', spec: '280g x 16', price: 176, origin: 'ä¸­åœ‹' },
            { cn: 'åˆ©æ˜¯-è„†é¤…', en: 'Ritz Crackers', cat: 'SNACKS', spec: '12 x (3x100g)', price: 100, origin: 'å°å°¼' },
            
            // æœ±å¤åŠ› Chocolate
            { cn: 'å£«åŠ›æ¶è¿·ä½ æœ±å¤åŠ›', en: 'Snickers Minis', cat: 'SNACKS', spec: '227g x 24s', price: 9999, origin: 'æœªçŸ¥' },
            { cn: 'ä¸‰è§’æœ±å¤åŠ›(å„æ¬¾)', en: 'Toblerone (Assorted)', cat: 'SNACKS', spec: 'å¤šç¨®è¦æ ¼', price: 9999, origin: 'ç‘å£«' },
            { cn: 'Orient æœ±å¤åŠ›(æ··åˆ)', en: 'Orient Choco (Mixed)', cat: 'SNACKS', spec: '400g x 12', price: 9999, origin: 'åœŸè€³å…¶' },

            // é£²å“/å¥¶é¡ Drinks
            { cn: 'å¯¶ç¤¦åŠ›(è‹±æ–‡ç‰ˆ)', en: 'Pocari Sweat (Eng)', cat: 'DRINKS_DAIRY', spec: '500ml x 24', price: 95, origin: 'å°å°¼' },
            { cn: 'é‡‘ç½ç´…ç‰›', en: 'Redbull (Gold)', cat: 'DRINKS_DAIRY', spec: '250ml x 24', price: 75, origin: 'è¶Šå—' },
            { cn: 'ä¸‰èŠ±æ¤è„‚æ·¡å¥¶', en: 'Carnation Evap Milk', cat: 'DRINKS_DAIRY', spec: '405g x 48', price: 280, origin: 'æ³°åœ‹' },
            { cn: 'ä¸‰èŠ±ç”œå¥¶(ç…‰å¥¶)', en: 'Nestle Sweetened Milk', cat: 'DRINKS_DAIRY', spec: '388g x 48', price: 265, origin: 'æ³°åœ‹' },
            { cn: 'é›€å·¢é·¹å˜œç…‰å¥¶', en: 'Eagle Condensed Milk', cat: 'DRINKS_DAIRY', spec: '350g x 48', price: 580, origin: 'ä¸­åœ‹' },
            { cn: 'å…‹å¯§é«˜éˆ£å¥¶ç²‰', en: 'Klim Milk Powder', cat: 'DRINKS_DAIRY', spec: '2.2kg x 6', price: 768, origin: 'æ–°è¥¿è˜­' },
            { cn: 'é›€å·¢å…¨è„‚å¥¶ç²‰', en: 'Nespray Full Cream', cat: 'DRINKS_DAIRY', spec: '2.1kg x 6', price: 858, origin: 'æ–°è¥¿è˜­' },
            { cn: 'æ¡‚æ ¼ç‡•éº¥ç‰‡', en: 'Quaker Oatmeal', cat: 'DRINKS_DAIRY', spec: '800g x 12', price: 192, origin: 'é¦¬ä¾†è¥¿äº' },
            { cn: 'ç¶­ä»–éº¥ç‡Ÿé¤Šéº¥ç‰‡', en: 'Vitamax Oatmeal', cat: 'DRINKS_DAIRY', spec: '300g x 20s x 20', price: 440, origin: 'ä¸­åœ‹' },

            // èª¿å‘³ Seasoning
            { cn: 'æ‰‹ç‰Œæ¢³æ‰“ç²‰', en: 'Arm & Hammer Soda', cat: 'SEASONING', spec: '454g x 24', price: 192, origin: 'ç¾åœ‹' },
            { cn: 'EUROSTARæ¢³æ‰“ç²‰', en: 'Eurostar Soda', cat: 'SEASONING', spec: '454g x 24', price: 144, origin: 'ä¸­åœ‹' },
            { cn: 'å®¶æ¨‚ç‰Œå¤§é·¹ç²Ÿç²‰', en: 'Knorr Corn Starch', cat: 'SEASONING', spec: '420g x 24', price: 219, origin: 'ä¸­åœ‹' },
            { cn: 'NUTELLAæ¦›å­é†¬', en: 'Nutella', cat: 'SEASONING', spec: '350g x 15', price: 367, origin: 'ç¾åœ‹' },
            { cn: 'é ‚å¥½ç‰ŒèŠ±ç”Ÿé†¬', en: 'Skippy Peanut Butter', cat: 'SEASONING', spec: '462g x 12', price: 320, origin: 'ç¾åœ‹' },
            { cn: 'LIN ç ‚ç³–', en: 'LIN Sugar', cat: 'SEASONING', spec: '2kg x 6', price: 108, origin: 'æ³°åœ‹' },
            { cn: 'å®¶æ¨‚ç‰Œé›ç²‰', en: 'Knorr Chicken Powder', cat: 'SEASONING', spec: '1kg x 12', price: 264, origin: 'ä¸­åœ‹' },

            // æ—¥ç”¨å“ Daily
            { cn: 'æ±°æ¼¬æ´—è¡£ç²‰', en: 'Tide Powder', cat: 'DAILY', spec: '350g x 36', price: 230, origin: 'è¶Šå—' },
            { cn: 'ARIEL æ´—è¡£æ¶²', en: 'Ariel Detergent', cat: 'DAILY', spec: '2kg x 6', price: 252, origin: 'è¶Šå—' },
            { cn: 'DOWNY æŸ”é †åŠ‘', en: 'Downy Softener', cat: 'DAILY', spec: '1.8L x 4', price: 174, origin: 'è¶Šå—' },
            { cn: 'æ£•æ¬–æ´—é«®éœ²', en: 'Palmolive Shampoo', cat: 'PERSONAL_CARE', spec: '620ml x 6', price: 150, origin: 'ä¸­åœ‹' },
            { cn: 'é«˜éœ²æ½”ç‰™è†', en: 'Colgate Toothpaste', cat: 'PERSONAL_CARE', spec: '180g x 6 x 16', price: 568, origin: 'è¶Šå—' },
            { cn: 'é™½å…‰æ´—æ½”ç²¾', en: 'Sunlight Dishwash', cat: 'DAILY', spec: '1.5L x 9', price: 162, origin: 'ä¸­åœ‹' },

            // å³æº¶é£²å“ Instant
            { cn: 'CAFFINO æ³¡æ²«å’–å•¡', en: 'Caffino Cappuccino', cat: 'INSTANT_MIXES', spec: '20g x 10s x 24', price: 192, origin: 'å°å°¼' },
            { cn: 'é›€å·¢å³æº¶å’–å•¡', en: 'Nescafe Instant', cat: 'INSTANT_MIXES', spec: '200g x 12', price: 384, origin: 'æ–°åŠ å¡' },
            { cn: 'é›€å·¢3åˆ1å’–å•¡', en: 'Nescafe 3in1', cat: 'INSTANT_MIXES', spec: '19g x 47s x 18', price: 738, origin: 'æ–°åŠ å¡' },
            { cn: 'èˆŠè¡—åŸ¸ç™½å’–å•¡', en: 'Old Town Coffee', cat: 'INSTANT_MIXES', spec: '38g x 15s x 20', price: 600, origin: 'é¦¬ä¾†è¥¿äº' },
            { cn: 'GADJAH æ»´å’–å•¡', en: 'Gadjah Drip', cat: 'INSTANT_MIXES', spec: '7.5g x 6 x 24', price: 312, origin: 'å°å°¼' },
            { cn: 'ç«‹é “å¥¶èŒ¶', en: 'Lipton Milk Tea', cat: 'INSTANT_MIXES', spec: '24 x 16.5g x 12', price: 396, origin: 'ä¸­åœ‹' },
            { cn: 'æ¾¤åˆç™½å’–å•¡', en: 'Chek Hup Coffee', cat: 'INSTANT_MIXES', spec: '40g x 12s x 20', price: 600, origin: 'é¦¬ä¾†è¥¿äº' },
            { cn: 'äºç™¼ç™½å’–å•¡', en: 'Ah Huat Coffee', cat: 'INSTANT_MIXES', spec: '38g x 15s x 20', price: 580, origin: 'é¦¬ä¾†è¥¿äº' },
            { cn: 'Good Day å’–å•¡', en: 'Good Day Coffee', cat: 'INSTANT_MIXES', spec: '20g x 30s x 12', price: 252, origin: 'å°å°¼' },
            { cn: 'é›€å·¢å’–å•¡ä¼´ä¾¶', en: 'Coffee-mate', cat: 'INSTANT_MIXES', spec: '450g x 24', price: 324, origin: 'æ³°åœ‹' },
            { cn: 'G7 3åˆ1å’–å•¡', en: 'G7 Coffee', cat: 'INSTANT_MIXES', spec: '10 x 50s', price: 395, origin: 'è¶Šå—' },
            { cn: 'é›€å·¢ç¾ç¥¿', en: 'Milo', cat: 'INSTANT_MIXES', spec: '400g x 24', price: 480, origin: 'é¦¬ä¾†è¥¿äº' },
            { cn: 'é˜¿è¯ç”°', en: 'Ovaltine', cat: 'INSTANT_MIXES', spec: '400g x 12', price: 264, origin: 'æ³°åœ‹' },
            { cn: 'å¥½ç«‹å…‹', en: 'Horlicks', cat: 'INSTANT_MIXES', spec: '2kg x 6', price: 560, origin: 'æ³°åœ‹' },
            { cn: 'å‰ç™¾åˆ©æœ±å¤åŠ›ç²‰', en: 'Cadbury Choco', cat: 'INSTANT_MIXES', spec: '500g x 6', price: 185, origin: 'è‹±åœ‹' },

            // ç½é ­è‚‰ Canned Meat
            { cn: 'é•·åŸç‰Œç«è…¿è±¬è‚‰', en: 'Greatwall Pork Ham', cat: 'CANNED_MEAT', spec: '340g x 48', price: 840, origin: 'ä¸­åœ‹' },
            { cn: 'æ¨‚å¤©ç‰¹ç´šåˆé¤è‚‰', en: 'Lotte Luncheon Meat', cat: 'CANNED_MEAT', spec: '340g x 24', price: 336, origin: 'éŸ“åœ‹' },
            { cn: 'éŸ“åŸéŸ“åœ‹åˆé¤è‚‰', en: 'Hansung Luncheon Meat', cat: 'CANNED_MEAT', spec: '340g x 24', price: 288, origin: 'éŸ“åœ‹' },
            { cn: 'å¤©é¾ç‰Œåˆé¤è‚‰', en: 'Skydragon Luncheon Meat', cat: 'CANNED_MEAT', spec: '397g x 48', price: 560, origin: 'ä¸­åœ‹' },
            { cn: 'çå¯¶åˆé¤è‚‰', en: 'Jumbo Luncheon Meat', cat: 'CANNED_MEAT', spec: '397g x 24 x 2', price: 540, origin: 'ä¸­åœ‹' },
            { cn: 'SPAM æ¸›é¹½åˆé¤è‚‰', en: 'Spam Less Sodium', cat: 'CANNED_MEAT', spec: '340g x 24', price: 600, origin: 'ç¾åœ‹' }, // Price est
            { cn: 'å¤©å£‡ç‰Œç«è…¿è±¬è‚‰', en: 'Heaven Temple Pork', cat: 'CANNED_MEAT', spec: '340g x 48', price: 840, origin: 'ä¸­åœ‹' },
            { cn: 'æ¢…æ—ç‰Œåˆé¤è‚‰', en: 'Maling Luncheon Meat', cat: 'CANNED_MEAT', spec: '340g x 48', price: 480, origin: 'ä¸­åœ‹' },
            { cn: 'ç æ±Ÿæ©‹ç‰Œè±†è±‰é¯ªé­š', en: 'Pearl River Dace', cat: 'CANNED_MEAT', spec: '227g x 48', price: 960, origin: 'ä¸­åœ‹' },
            { cn: 'å¤©é¾ç‰Œè±†è±‰é¯ªé­š', en: 'Skydragon Dace', cat: 'CANNED_MEAT', spec: '184g x 48', price: 480, origin: 'ä¸­åœ‹' },
            { cn: 'å¤é¾ç‰Œé»ƒèŠ±é­š', en: 'Gulong Croaker', cat: 'CANNED_MEAT', spec: '120g x 24', price: 240, origin: 'ä¸­åœ‹' },
            { cn: 'å¤©é¾ç‰Œäº”é¦™è‚‰ä¸', en: 'Skydragon Pork Cubes', cat: 'CANNED_MEAT', spec: '142g x 96', price: 810, origin: 'ä¸­åœ‹' },
            { cn: 'æ°´ä»™èŠ±ç‰Œäº”é¦™è‚‰ä¸', en: 'Narcissus Pork Cubes', cat: 'CANNED_MEAT', spec: '142g x 96', price: 1050, origin: 'ä¸­åœ‹' },
            { cn: 'æ¢…æ—ç‰Œå›é‹è‚‰', en: 'Maling Sliced Pork', cat: 'CANNED_MEAT', spec: '198g x 72', price: 700, origin: 'ä¸­åœ‹' },
            { cn: 'å¤é¾ç‰Œé¦™è‡è‚‰é†¬', en: 'Gulong Meat Sauce', cat: 'CANNED_MEAT', spec: '180g x 48', price: 408, origin: 'ä¸­åœ‹' },
            { cn: 'å¤é¾ç‰Œç´…ç‡’æ’éª¨', en: 'Gulong Spare Ribs', cat: 'CANNED_MEAT', spec: '256g x 48', price: 800, origin: 'ä¸­åœ‹' }
        ];

        // --- CORE FUNCTIONS ---

        // Initialize Application
        function init() {
            // Check for Print Mode URL
            const urlParams = new URLSearchParams(window.location.search);
            const printData = urlParams.get('printData');
            
            if (printData) {
                initPrintMode(printData);
                return; // Stop normal app init
            }

            // Normal App Init
            try {
                const stored = localStorage.getItem('wholesale_customer');
                if (stored) state.customer = JSON.parse(stored);
            } catch(e) { console.error('Load Error', e); }

            // Process Products
            state.products = rawData.map((p, idx) => ({
                id: `P${idx + 1000}`, // Generate ID
                ...p,
                isHot: ['åŠ›å£«', 'é•·åŸ', 'é«˜éœ²æ½”', 'æ¨‚å¤©', 'CAFFINO'].some(k => p.cn.includes(k)) // Simple hot item logic
            }));

            // Render
            updateCustomerDisplay();
            renderCategories();
            renderProducts();
            renderCart();
        }

        // --- PRINT MODE LOGIC ---
        function initPrintMode(encodedData) {
            // 1. Hide Shop UI, Show Print UI
            document.body.innerHTML = '<div id="print-area"></div>';
            const printArea = document.getElementById('print-area');

            // 2. Decode Data
            // Payload format: "oid=SO-123&cust=ABC&d=P1001-5,P1002-3"
            const params = new URLSearchParams(decodeURIComponent(encodedData));
            const orderId = params.get('oid');
            const custName = params.get('cust');
            const itemsStr = params.get('d'); // "P1001-5,P1002-3"

            if (!itemsStr) {
                printArea.innerHTML = "<h1>ç„¡æ•ˆçš„è¨‚å–®æ•¸æ“š</h1>";
                return;
            }

            // 3. Process items to generate labels
            // We need rawData to look up names
            // Re-process products locally since we are in a fresh reload
            const productsMap = {};
            rawData.forEach((p, idx) => {
                productsMap[`P${idx + 1000}`] = p;
            });

            const items = itemsStr.split(',');
            let allLabelsHtml = '';

            items.forEach(itemStr => {
                const [pid, qtyStr] = itemStr.split('-');
                const qty = parseInt(qtyStr);
                const product = productsMap[pid];
                
                if (product && qty > 0) {
                    // Generate one label per piece/carton
                    for (let i = 1; i <= qty; i++) {
                        allLabelsHtml += `
                            <div class="label-card">
                                <h1 class="text-xl font-bold mb-2">${product.cn}</h1>
                                <p class="text-sm mb-1">${product.spec}</p>
                                <p class="text-xs text-gray-500 mb-2">${product.en}</p>
                                <div class="border-t border-black my-2 pt-2 flex justify-between items-end">
                                    <div class="text-left">
                                        <p class="text-xs font-bold">Order: ${orderId}</p>
                                        <p class="text-xs truncate w-32">${custName}</p>
                                    </div>
                                    <div class="text-2xl font-bold">
                                        ${i} / ${qty}
                                    </div>
                                </div>
                            </div>
                        `;
                    }
                }
            });

            // 4. Render and Auto Print
            printArea.innerHTML = `
                <div class="no-print p-4 text-center bg-gray-200">
                    <h2 class="text-xl font-bold mb-2">æ¨™ç±¤åˆ—å°æ¨¡å¼</h2>
                    <button onclick="window.print()" class="bg-blue-600 text-white px-6 py-3 rounded-lg shadow font-bold">ğŸ–¨ï¸ ç«‹å³åˆ—å°æ¨™ç±¤</button>
                    <p class="mt-2 text-sm text-gray-600">è«‹ç¢ºä¿é€£æ¥æ¨™ç±¤æ‰“å°æ©Ÿ (å¦‚ HPRT N31bt)</p>
                </div>
                ${allLabelsHtml}
            `;
        }

        // Helper: Format Price
        function formatPrice(p) {
            return p === 9999 ? '<span class="text-red-500 text-sm">è«‹æŸ¥è©¢ (Enquiry)</span>' : `HK$${p.toFixed(2)}`;
        }

        // Render Categories
        function renderCategories() {
            const nav = document.getElementById('category-nav');
            nav.innerHTML = Object.values(CATEGORIES).map(c => `
                <button onclick="setCategory('${c.id}')" 
                    class="px-4 py-2 rounded-full whitespace-nowrap text-sm font-medium transition-colors 
                    ${state.currentCategory === c.id ? 'bg-blue-600 text-white shadow-md' : 'bg-white text-gray-600 hover:bg-gray-100'}">
                    ${c.name}
                </button>
            `).join('');
        }

        // Render Products
        function renderProducts() {
            const grid = document.getElementById('product-grid');
            const targetProducts = state.products.filter(p => 
                state.currentCategory === 'HOT_ITEMS' ? p.isHot : p.cat === state.currentCategory
            );

            if(targetProducts.length === 0) {
                grid.innerHTML = `<div class="col-span-full text-center py-10 text-gray-400">æš«ç„¡ç”¢å“</div>`;
                return;
            }

            grid.innerHTML = targetProducts.map(p => `
                <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-4 flex flex-col h-full hover:shadow-md transition-shadow">
                    <div class="flex-1">
                        <div class="flex justify-between items-start">
                            <h3 class="font-bold text-gray-800 text-lg leading-tight mb-1">${p.cn}</h3>
                            ${p.isHot ? '<span class="bg-red-100 text-red-600 text-xs px-2 py-1 rounded-full">ç†±è³£</span>' : ''}
                        </div>
                        <p class="text-xs text-gray-500 mb-2">${p.en}</p>
                        <div class="flex items-center gap-2 mb-3">
                            <span class="bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded">${p.spec}</span>
                            <span class="bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded">${p.origin}</span>
                        </div>
                    </div>
                    <div class="mt-4 pt-3 border-t border-gray-50 flex items-center justify-between">
                        <div class="font-bold text-blue-600 text-lg">${formatPrice(p.price)}</div>
                        <button onclick="addToCart('${p.id}')" class="bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-lg shadow transition-colors">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // Switch Category
        window.setCategory = (id) => {
            state.currentCategory = id;
            renderCategories();
            renderProducts();
            window.scrollTo({top: 0, behavior: 'smooth'});
        };

        // Cart Actions
        window.addToCart = (id) => {
            state.cart[id] = (state.cart[id] || 0) + 1;
            showToast('å·²åŠ å…¥è³¼ç‰©è»Š');
            renderCart();
        };

        window.updateQty = (id, change) => {
            if (state.cart[id] + change <= 0) {
                delete state.cart[id];
            } else {
                state.cart[id] += change;
            }
            renderCart();
        };

        window.toggleCart = () => {
            const panel = document.getElementById('cart-panel');
            panel.classList.toggle('translate-x-full');
            // Hide post-submit actions when reopening
            document.getElementById('post-submit-actions').classList.add('hidden');
            document.getElementById('cart-footer').classList.remove('hidden');
        };

        // Render Cart
        function renderCart() {
            const container = document.getElementById('cart-items');
            const ids = Object.keys(state.cart);
            let total = 0;
            let count = 0;
            let hasEnquiry = false;

            document.getElementById('cart-count').innerText = ids.reduce((a,b) => a + state.cart[b], 0);

            if (ids.length === 0) {
                container.innerHTML = `<div class="h-full flex flex-col items-center justify-center text-gray-400">
                    <svg class="w-12 h-12 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>
                    <p>è³¼ç‰©è»Šæ˜¯ç©ºçš„</p>
                </div>`;
                document.getElementById('cart-total-price').innerText = 'HK$0.00';
                return;
            }

            container.innerHTML = ids.map(id => {
                const p = state.products.find(x => x.id === id);
                const qty = state.cart[id];
                const subtotal = p.price === 9999 ? 0 : p.price * qty;
                
                if(p.price === 9999) hasEnquiry = true;
                else total += subtotal;
                count += qty;

                return `
                    <div class="bg-white p-3 rounded-lg border border-gray-100 mb-2">
                        <div class="flex justify-between mb-1">
                            <span class="font-medium text-gray-800 text-sm line-clamp-1">${p.cn}</span>
                            <span class="font-bold text-sm ${p.price === 9999 ? 'text-red-500' : 'text-gray-900'}">
                                ${p.price === 9999 ? 'æŸ¥è©¢' : 'HK$'+subtotal.toFixed(0)}
                            </span>
                        </div>
                        <div class="flex justify-between items-center text-xs text-gray-500">
                            <span>${p.spec}</span>
                            <div class="flex items-center gap-3 bg-gray-50 rounded px-2 py-1">
                                <button onclick="updateQty('${id}', -1)" class="hover:text-blue-600">-</button>
                                <span class="font-bold w-4 text-center">${qty}</span>
                                <button onclick="updateQty('${id}', 1)" class="hover:text-blue-600">+</button>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');

            document.getElementById('cart-total-items').innerText = count;
            document.getElementById('cart-total-price').innerText = `HK$${total.toFixed(2)}` + (hasEnquiry ? ' + è©¢åƒ¹' : '');
        }

        // --- CUSTOMER FORM LOGIC ---
        window.openCustomerModal = () => {
            const modal = document.getElementById('customer-modal');
            modal.classList.remove('hidden');
            // Fill form
            document.getElementById('cust-name').value = state.customer.name;
            document.getElementById('cust-id').value = state.customer.id;
            document.getElementById('cust-phone').value = state.customer.phone;
            document.getElementById('cust-address').value = state.customer.address;
        };

        window.closeCustomerModal = () => {
            document.getElementById('customer-modal').classList.add('hidden');
        };

        window.saveCustomer = (e) => {
            e.preventDefault();
            state.customer = {
                name: document.getElementById('cust-name').value,
                id: document.getElementById('cust-id').value,
                phone: document.getElementById('cust-phone').value,
                address: document.getElementById('cust-address').value,
            };
            localStorage.setItem('wholesale_customer', JSON.stringify(state.customer));
            updateCustomerDisplay();
            closeCustomerModal();
            showToast('å®¢æˆ¶è³‡æ–™å·²å„²å­˜');
        };

        function updateCustomerDisplay() {
            const el = document.getElementById('customer-label');
            if (state.customer.name) {
                el.innerHTML = `<span class="font-bold">${state.customer.name}</span> <span class="text-xs opacity-75">(${state.customer.id})</span>`;
            } else {
                el.innerHTML = `<span>è¨­å®šå®¢æˆ¶è³‡æ–™</span>`;
            }
        }

        // --- SUBMISSION & FEATURES ---
        
        window.prepareOrder = () => {
            // Check cart
            if (Object.keys(state.cart).length === 0) {
                alert("è³¼ç‰©è»Šæ˜¯ç©ºçš„");
                return;
            }
            // Check customer
            if (!state.customer.name || !state.customer.id) {
                alert("è«‹å…ˆå¡«å¯«å®¢æˆ¶è³‡æ–™ (é»æ“Šå·¦ä¸Šè§’æŒ‰éˆ•)");
                openCustomerModal();
                return;
            }

            // "Simulate" submission
            state.lastOrderId = `SO-${Date.now().toString().slice(-6)}`;
            
            // Show post-submit UI
            document.getElementById('cart-footer').classList.add('hidden');
            const actions = document.getElementById('post-submit-actions');
            actions.classList.remove('hidden');
            
            // --- NEW: Generate QR for Label Printing ---
            // Construct payload: oid=ID&cust=Name&d=P1:2,P2:5...
            const itemsPayload = Object.entries(state.cart).map(([k,v]) => `${k}-${v}`).join(',');
            const printPayload = `oid=${state.lastOrderId}&cust=${encodeURIComponent(state.customer.name)}&d=${itemsPayload}`;
            
            // Generate full URL (current location + query param)
            const printUrl = window.location.href.split('?')[0] + '?printData=' + encodeURIComponent(printPayload);

            document.getElementById('qrcode').innerHTML = '';
            new QRCode(document.getElementById('qrcode'), {
                text: printUrl,
                width: 128,
                height: 128
            });
            
            document.getElementById('success-order-id').innerText = state.lastOrderId;
        };

        window.sendWhatsApp = () => {
            const lines = [];
            lines.push(`*æ–°è¨‚å–® New Order*`);
            lines.push(`Order ID: ${state.lastOrderId}`);
            lines.push(`å®¢æˆ¶: ${state.customer.name} (${state.customer.id})`);
            lines.push(`é›»è©±: ${state.customer.phone}`);
            lines.push(`åœ°å€: ${state.customer.address}`);
            lines.push(`----------------`);
            
            let total = 0;
            Object.keys(state.cart).forEach(id => {
                const p = state.products.find(x => x.id === id);
                const qty = state.cart[id];
                const sub = p.price === 9999 ? "è©¢åƒ¹" : p.price * qty;
                if (typeof sub === 'number') total += sub;
                lines.push(`${p.cn} x ${qty}ç®± = ${typeof sub === 'number' ? '$'+sub : sub}`);
            });
            
            lines.push(`----------------`);
            lines.push(`*é è¨ˆç¸½é¡: HK$${total.toFixed(2)}*`);
            
            const note = document.getElementById('ai-note-result').innerText;
            if (note) lines.push(`å‚™è¨»: ${note}`);

            const url = `https://wa.me/852${WHATSAPP_NUMBER}?text=${encodeURIComponent(lines.join('\n'))}`;
            window.open(url, '_blank');
        };

        window.downloadIIF = () => {
            const date = new Date().toLocaleDateString('en-US'); // MM/DD/YYYY
            let content = `!TRNS\tTRNSID\tTRNSTYPE\tDATE\tACCNT\tNAME\tAMOUNT\tDOCNUM\tMEMO\n`;
            content += `!SPL\tSPLID\tTRNSTYPE\tDATE\tACCNT\tNAME\tAMOUNT\tDOCNUM\tMEMO\tITEM\tQTY\tRATE\tPRICE\n`;
            
            let total = 0;
            let splRows = '';
            
            Object.keys(state.cart).forEach(id => {
                const p = state.products.find(x => x.id === id);
                const qty = state.cart[id];
                const rate = p.price === 9999 ? 0 : p.price;
                const amt = rate * qty;
                total += amt;
                
                splRows += `SPL\t\tINVOICE\t${date}\tSales\t\t${-amt}\t${state.lastOrderId}\t${p.cn}\t${p.id}\t${-qty}\t${rate}\t${amt}\n`;
            });

            content += `TRNS\t\tINVOICE\t${date}\tAccounts Receivable\t${state.customer.id}\t${total}\t${state.lastOrderId}\tSales Order\n`;
            content += splRows;
            content += `ENDTRNS\n`;

            const blob = new Blob([content], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `Inv_${state.lastOrderId}.iif`;
            a.click();
        };

        // Gemini AI Logic
        window.askGemini = async () => {
            const btn = document.getElementById('ai-btn');
            const result = document.getElementById('ai-note-result');
            
            if (Object.keys(state.cart).length === 0) return;
            if (!apiKey) {
                result.innerText = "API Key æœªè¨­å®š";
                return;
            }

            btn.disabled = true;
            btn.innerText = "åˆ†æä¸­...";
            
            // Construct prompt
            const items = Object.keys(state.cart).map(id => state.products.find(x => x.id === id).cn).join(', ');
            const prompt = `åˆ†ææ­¤æ‰¹ç™¼è¨‚å–®ä¸¦çµ¦å‡ºç°¡çŸ­ç‰©æµå‚™è¨»(ä¾‹å¦‚ï¼šæ˜“ç¢ã€é‡è²¨ã€éœ€å†·è—)ã€‚ç”¢å“ï¼š${items}ã€‚è«‹åªå›è¦†å‚™è¨»å…§å®¹ï¼Œç¹é«”ä¸­æ–‡ã€‚`;
            
            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
                });
                const data = await response.json();
                result.innerText = data.candidates[0].content.parts[0].text;
            } catch (e) {
                result.innerText = "AI åˆ†æå¤±æ•—";
                console.error(e);
            } finally {
                btn.disabled = false;
                btn.innerText = "AI æ™ºèƒ½å‚™è¨»";
            }
        };

        // Toast Notification
        function showToast(msg) {
            const el = document.createElement('div');
            el.className = 'fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-4 py-2 rounded-full text-sm shadow-lg z-50 animate-bounce';
            el.innerText = msg;
            document.body.appendChild(el);
            setTimeout(() => el.remove(), 2000);
        }

        // Init
        window.onload = init;

    </script>

    <!-- HEADER -->
    <header class="sticky-nav border-b border-gray-200 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 py-3 flex justify-between items-center">
            <!-- Left: Logo & Customer -->
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center text-white font-bold text-xl">N1</div>
                <div>
                    <h1 class="font-bold text-gray-800 text-lg leading-none">æ†ç«‹(é¦™æ¸¯)</h1>
                    <button onclick="openCustomerModal()" id="customer-label" class="text-xs text-blue-600 hover:underline flex items-center mt-1">
                        è¨­å®šå®¢æˆ¶è³‡æ–™
                    </button>
                </div>
            </div>

            <!-- Right: Cart Trigger -->
            <button onclick="toggleCart()" class="relative p-2 text-gray-600 hover:text-blue-600">
                <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path></svg>
                <span id="cart-count" class="absolute top-0 right-0 bg-red-500 text-white text-xs font-bold w-5 h-5 rounded-full flex items-center justify-center border-2 border-white">0</span>
            </button>
        </div>

        <!-- Category Nav -->
        <div class="max-w-7xl mx-auto px-4 py-2 overflow-x-auto category-scroll flex gap-2" id="category-nav">
            <!-- Injected by JS -->
        </div>
    </header>

    <!-- MAIN GRID -->
    <main class="max-w-7xl mx-auto px-4 py-6">
        <div id="product-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
            <!-- Injected by JS -->
        </div>
    </main>

    <!-- CART SIDEBAR -->
    <div id="cart-panel" class="fixed inset-y-0 right-0 w-full sm:w-96 bg-white shadow-2xl transform translate-x-full transition-transform duration-300 z-50 flex flex-col">
        <!-- Header -->
        <div class="p-4 bg-gray-50 border-b border-gray-200 flex justify-between items-center">
            <h2 class="font-bold text-lg text-gray-800">è¨‚å–®æ˜ç´°</h2>
            <button onclick="toggleCart()" class="text-gray-400 hover:text-gray-600">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>
        </div>

        <!-- Scrollable Items -->
        <div class="flex-1 overflow-y-auto p-4" id="cart-items">
            <!-- Injected by JS -->
        </div>

        <!-- AI Note Section -->
        <div class="px-4 py-2 bg-purple-50 border-t border-purple-100">
            <div class="flex justify-between items-center mb-1">
                <span class="text-xs font-bold text-purple-800">AI è¨‚å–®åˆ†æ</span>
                <button id="ai-btn" onclick="askGemini()" class="text-xs bg-purple-200 hover:bg-purple-300 text-purple-800 px-2 py-1 rounded transition">ç”Ÿæˆå»ºè­°</button>
            </div>
            <p id="ai-note-result" class="text-xs text-gray-600 italic min-h-[1.5em]">...</p>
        </div>

        <!-- Footer Actions -->
        <div class="p-4 border-t border-gray-200 bg-white">
            <div class="flex justify-between items-end mb-4">
                <span class="text-gray-500 text-sm">å…± <span id="cart-total-items">0</span> ä»¶</span>
                <span class="text-2xl font-bold text-blue-600" id="cart-total-price">HK$0.00</span>
            </div>

            <!-- Initial Submit -->
            <div id="cart-footer">
                <button onclick="prepareOrder()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl shadow-lg transition transform active:scale-95">
                    ç¢ºèªä¸¦æäº¤è¨‚å–®
                </button>
            </div>

            <!-- Post-Submit Actions (Hidden by default) -->
            <div id="post-submit-actions" class="hidden space-y-3">
                <div class="bg-green-50 rounded-lg p-3 text-center mb-2 border border-green-100">
                    <p class="text-green-800 font-bold text-sm">âœ… è¨‚å–®å·²ç”Ÿæˆ: <span id="success-order-id"></span></p>
                    <div id="qrcode" class="flex justify-center my-2 mix-blend-multiply"></div>
                    <p class="text-xs text-green-600">è«‹æˆªåœ–ä¿å­˜ QR Code ä¾›å€‰åº«æƒæ</p>
                </div>
                
                <button onclick="sendWhatsApp()" class="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 rounded-xl shadow flex items-center justify-center gap-2">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 3.891 1.746 5.634l-.999 3.648 3.742-.981zm11.387-5.464c-.074-.124-.272-.198-.57-.347-.297-.149-1.758-.868-2.031-.967-.272-.099-.47-.149-.669.149-.198.297-.768.967-.941 1.165-.173.198-.347.223-.644.074-.297-.149-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.521.151-.172.2-.296.3-.495.099-.198.05-.372-.025-.521-.075-.148-.669-1.611-.916-2.206-.242-.579-.487-.501-.669-.51l-.57-.01c-.198 0-.52.074-.792.372-.272.297-1.04 1.017-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.095 3.2 5.076 4.487.709.306 1.263.489 1.694.626.712.226 1.36.194 1.872.118.571-.085 1.758-.719 2.006-1.413.248-.695.248-1.29.173-1.414z"/></svg>
                    ç™¼é€ WhatsApp
                </button>
                
                <button onclick="downloadIIF()" class="w-full bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 rounded-xl shadow">
                    ä¸‹è¼‰ Quickbooks IIF
                </button>
            </div>
        </div>
    </div>

    <!-- CUSTOMER MODAL -->
    <div id="customer-modal" class="fixed inset-0 bg-gray-900 bg-opacity-50 hidden z-[60] flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden">
            <div class="bg-blue-600 p-4 text-white flex justify-between items-center">
                <h3 class="font-bold text-lg">è¨­å®šå®¢æˆ¶è³‡æ–™ (å¿…å¡«)</h3>
                <button onclick="closeCustomerModal()" class="text-blue-100 hover:text-white text-2xl">&times;</button>
            </div>
            <form onsubmit="saveCustomer(event)" class="p-6 space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">å®¢æˆ¶åç¨±</label>
                    <input type="text" id="cust-name" required class="w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">å®¢æˆ¶ç·¨è™Ÿ (Quickbooks ID)</label>
                    <input type="text" id="cust-id" required class="w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none" placeholder="ä¾‹å¦‚: CUST001">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">é›»è©±</label>
                    <input type="text" id="cust-phone" required class="w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">é€è²¨åœ°å€</label>
                    <textarea id="cust-address" required rows="3" class="w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"></textarea>
                </div>
                <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl">å„²å­˜è³‡æ–™</button>
            </form>
        </div>
    </div>

</body>
</html>
